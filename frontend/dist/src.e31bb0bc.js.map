{"version":3,"sources":["classes/queue.js","classes/loadBar.js","classes/serverReq.js","plugins/ApplyNotice.js","util/util.js","classes/notice.js","classes/Qmaker.js","classes/Qlist.js","plugins/modal.js","classes/App.js","plugins/homepage.js","index.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["QueueBlock","values","canAddQueue","min","idQueue","template","list","templateList","JSON","parse","localStorage","getItem","uid","content","name","positionStudent","div","class_","id","idStudent","HTML","ul","responseAboutStudentList","map","item","index","template_u","template_list","nameOfStudent","replace","join","vk_link","li","$LoadBar","$load","document","createElement","classList","add","hashCode","innerHTML","body","appendChild","getElementById","removeChild","String","prototype","hash","i","chr","length","charCodeAt","require","ip","port","serverRequest","idS","sendRequestAsync","idQ","app","type","dependOnApps","CountApps","DependOnDate","DateToPass","boolToInt","int","url_to","url","loadbar","load","fetch","method","headers","Authorization","stringify","response","destroy","json","apply","text","html","Promise","resolve","reject","$apply","tabIndex","dataset","action","toggleStateById","flag","message","$elem","remove","$input","oninput","e","preventDefault","number","target","valueAsNumber","isNaN","parseInt","data","value","parentNode","addEventListener","console","log","applyInvite","href","closeModal","openModal","getStateModal","contains","getTimeUnix","Date","now","ReloadName","getName","getId","validSession","expire","getPage","setPage","setItem","Auth","callback","$btn_auth","VK","login","session","user","first_name","last_name","addStudent","then","createQueueText","copyToClipboard","window","clipboardData","setData","queryCommandSupported","textarea","textContent","style","position","select","execCommand","ex","warn","prompt","Notice","setup","noticeList","Qname","Qhash","Q","sender","recipient","update","version","codeName","vkLink","listToHtml","$notice","renderNotice","clickHandler","bind","removeEventListener","close","input","filter","InviteApply","appendQ","history","pushState","title","location","pathname","reload","cooldown","$nt","setTimeout","capitalize","s","toUpperCase","slice","$Qmaker","open","$f","pattern","options","controlInput","__popup__","$name","$apps","$date","$cmnB","$smrB","parseValues","trim","dependOnDate","checkInputs","toggleState","toggle","actions","switch","$btn","create","QList","selected","eventListeners","previewSelected","getQueuesById","all","getQueuePropertyById","subjectName","push","allMin","toHtml","getListOfStudentInQueueById","ID","toListHtml","addEventListeners","ctrlKey","metaKey","$__preview__","currentTarget","querySelectorAll","forEach","elem","quicklook","closeQuicklook","find","render","createQ","leaveFromQueue","deleteEventListeners","$modalWindow","$modal","parseContent","elements","el","class","App","error","show_error","$header","$main","$footer","onclick","getLoginStatus","logout","removeItem","openNotice","openHome","parseListOfQueues","homepage","$page","onload","main","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","exports","bundle","updateLink","link","newLink","cloneNode","split","insertBefore","nextSibling","cssTimeout","reloadCSS","links","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","onclose","removeErrorOverlay","overlay","createErrorOverlay","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"..\\src","sourcesContent":["export class QueueBlock {\r\n  constructor(values, canAddQueue) {\r\n    this.values = values;\r\n    this.min = true;\r\n    this.canAddQueue = canAddQueue;\r\n  }\r\n\r\n  get ID() {\r\n    return this.values.idQueue;\r\n  }\r\n\r\n  toHtml() {\r\n    return template(this.values);\r\n  }\r\n  toListHtml(list) {\r\n    return templateList(\r\n      this.values,\r\n      list,\r\n      JSON.parse(localStorage.getItem(\"vk_auth\")).uid\r\n    );\r\n  }\r\n}\r\n\r\nconst template = (content) => {\r\n  return `\r\n    <div class=\"qItem\" id=\"${content.idQueue}\" data-action=\"open\" data-id=\"${content.idQueue}\" data-name=\"${content.name}\">\r\n      <div class=\"qName\">${content.name}</div>\r\n      <div class=\"qPos\">Ваша позиция: ${content.positionStudent}</div>\r\n      <div class=\"btn apply\" data-action=\"passed\" data-app=\"0\">\r\n        <span class=\"btn-text\">Сдал задание</span>\r\n      </div>\r\n    </div>\r\n    `;\r\n};\r\n\r\nfunction div(content, class_ = \"\", id = \"\") {\r\n  return `<div class=\"${class_}\" id=\"${id}\">${content}</div>`;\r\n}\r\n\r\nconst templateList = (content, list, idStudent) => {\r\n  let HTML = div(\r\n    `<span>${content.name}</span>\r\n    <div class=\"btn_container flex-row\">\r\n        <div class=\"p_btn copy\" data-action=\"copy\" data-target=\"${content.idQueue}\"></div>\r\n        <div class=\"p_btn exit\" data-action=\"exit\" data-target=${content.idQueue}></div>\r\n    </div>\r\n    <div class=\"p_btn back\" data-action=\"back\"></div>`,\r\n    \"subject-name center-items\"\r\n  );\r\n  \r\n  HTML += ul(\r\n    list.responseAboutStudentList\r\n      .map((item, index) =>\r\n        `${item.idStudent}` === idStudent\r\n          ? template_u(index)\r\n          : template_list(\r\n              item.nameOfStudent.replace(\"_\", \" \"),\r\n              index,\r\n              `http://vk.com/id${item.idStudent}`\r\n            )\r\n      )\r\n      .join(\"\"),\r\n    \"custom-scrollbar\"\r\n  );\r\n  return div(HTML, \"qList\", \"queueBody\");\r\n};\r\n\r\nconst template_list = (content, index, vk_link) => {\r\n  return li(\r\n    `\r\n      <div class=\"position center-items\">${index+1}</div>\r\n      <span class=\"name center-items\">${content}</span>\r\n      <div class=\"btn_container flex-row\">\r\n          <a class=\"btn vk\" href=${vk_link} data-action='link'>VK</a>\r\n          <div class=\"btn swap\" data-action=\"swap\" data-target=\"id\">SWAP</div>\r\n      </div>\r\n    `,\r\n    'item center-items'\r\n  )\r\n};\r\n\r\nconst ul = (content, class_, id) => `<ul class=${class_} id=\"${id}\">${content}</ul>`\r\nconst li = (content, class_, id) => `<li class=${class_} id=\"${id}\">${content}</li>`\r\n\r\nconst template_u = (index) => {\r\n  return li(\r\n    `<div class=\"position center-items\">${index+1}</div><span class=\"center-items\">Вы</span>`,\r\n    'item u center-items'\r\n  )\r\n};\r\n","export class $LoadBar {\r\n    load(id) {\r\n        const $load = document.createElement('div')\r\n        $load.classList.add('load')\r\n        $load.id = id.hashCode()\r\n        $load.classList.add('center-items')\r\n        $load.innerHTML = '<div class=\"square border-2px\"></div>'\r\n        document.body.appendChild($load)\r\n        this.id = id\r\n    }\r\n    destroy() {\r\n        const $load = document.getElementById(this.id.hashCode())\r\n        if ($load) {\r\n            document.body.removeChild($load)\r\n        }\r\n    }\r\n}\r\n\r\nString.prototype.hashCode = function() {\r\n    var hash = 0, i, chr;\r\n    if (this.length === 0) return hash;\r\n    for (i = 0; i < this.length; i++) {\r\n      chr   = this.charCodeAt(i);\r\n      hash  = ((hash << 5) - hash) + chr;\r\n      hash |= 0; // Convert to 32bit integer\r\n    }\r\n    return hash;\r\n};","import { $LoadBar } from \"./loadBar\";\r\n(\"use strict\");\r\nrequire(\"fs\");\r\n\r\nconst ip = \"25.84.228.15\";\r\nconst port = \"8080\";\r\n\r\nexport class serverRequest {\r\n    static async addStudent(idS, name) {\r\n        return await sendRequestAsync(\r\n            `student/add?id=${idS}&NameOfStudent=${name.replace(\" \", \"_\")}`,\r\n        );\r\n    }\r\n    static async getQueuesById(idS) {\r\n        return await sendRequestAsync(`listOfQueues/getByIdStudent/${idS}`);\r\n    }\r\n    static async getQueuePropertyById(idQ) {\r\n        return await sendRequestAsync(`queue/get/${idQ}`);\r\n    }\r\n    static async getListOfStudentInQueueById(idQ) {\r\n        return await sendRequestAsync(`listOfQueues/getByIdQueue/${idQ}`);\r\n    }\r\n    static async getAllStudent() {\r\n        return await sendRequestAsync(`student/all`);\r\n    }\r\n    static async appendQ(idS, hash, app) {\r\n        return await sendRequestAsync(`listOfQueues/add/${hash}/${idS}/${app}`);\r\n    }\r\n    static async getListNotice(id) {\r\n        return [];\r\n    }\r\n    static async leaveFromQueue(idQueue, idStudent) {\r\n        return await sendRequestAsync(`listOfQueues/ByIdStudentAndQueue/${idStudent}/${idQueue}`);\r\n    }\r\n    static async createQ(\r\n        name,\r\n        type,\r\n        dependOnApps,\r\n        CountApps,\r\n        DependOnDate,\r\n        DateToPass,\r\n        idS,\r\n    ) {\r\n        return await sendRequestAsync(\r\n            `queue/add?subjectName=${name}&type=${boolToInt(\r\n                type,\r\n            )}&dependOnApps=${boolToInt(\r\n                dependOnApps,\r\n            )}&countApps=${CountApps}&dependOnDate=${boolToInt(\r\n                DependOnDate,\r\n            )}&dateToPass=${DateToPass}&idStudent=${idS}`,\r\n        );\r\n    }\r\n}\r\n\r\nconst boolToInt = (int) => (int ? 1 : 0);\r\n\r\nasync function sendRequestAsync(url_to) {\r\n    const url = `https://${ip}:${port}/${url_to}`;\r\n    const loadbar = new $LoadBar();\r\n    loadbar.load(url_to);\r\n    try {\r\n        const response = await fetch(url, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: JSON.stringify(\"12345\"),\r\n            },\r\n        });\r\n        loadbar.destroy(url_to);\r\n        return response.json();\r\n    } catch (err) {\r\n        loadbar.destroy(url_to);\r\n        return -1;\r\n    }\r\n}\r\n","export const apply = (text, content={\r\n    id : 0,\r\n    html : \"\",\r\n    type : \"\"\r\n}) => {\r\n    return new Promise((resolve, reject) => {\r\n        const $apply = document.createElement(\"div\");\r\n        $apply.classList.add(\"modal\", \"visible\", \"center-items\", \"flex-column\");\r\n        $apply.tabIndex = 0\r\n        $apply.id = \"modal-apply\";\r\n        $apply.dataset.action = \"close\";\r\n        $apply.innerHTML = `\r\n\t\t\t<div class=\"notice apply padding-content center-items shadow flex-column\">\r\n\t\t\t${text}\r\n\t\t\t${content.html || \"\"}\r\n\t\t\t<div class=\"btn-container flex-row\">\r\n\t\t\t\t\t<div class=\"btn apply\" data-action=\"ok\">Подтвердить</div>\r\n\t\t\t\t\t<div class=\"btn close\" data-action=\"cancel\">Отмена</div>\r\n\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n        document.body.appendChild($apply);\r\n\r\n        const toggleStateById = (id, flag, message) => {\r\n            const $elem = document.getElementById(id)\r\n            if (flag) {\r\n                $elem.classList.remove('error', message === 1 ? 'message' : message === 2 ? 'type_err' : null);\r\n                $elem.classList.add('success');\r\n            }\r\n            else {\r\n                $elem.classList.add('error', message === 1 ? 'message' : message === 2 ? 'type_err' : null);\r\n                $elem.classList.remove('success');\r\n            }\r\n        }\r\n\r\n        if (content.type === 'input') {\r\n            const $input = document.getElementById(content.id)\r\n            $input.oninput = e => {\r\n                e.preventDefault();\r\n                const number = e.target.valueAsNumber\r\n                \r\n                if (number > 100 || number <= 0 || (isNaN(parseInt(e.data)) && e.data)) {\r\n                    e.target.value = ''\r\n                    toggleStateById(e.target.parentNode.id, 0, 2)\r\n                }\r\n                else {\r\n                    toggleStateById(e.target.parentNode.id, 1)\r\n                }\r\n            }\r\n        }\r\n\r\n        // $apply.onkeydown = e => {\r\n        //     e.preventDefault()\r\n        //     console.log(e.key);\r\n        //     if (e.key === 'escape') {\r\n        //         resolve(false);\r\n        //         document.body.removeChild($apply);\r\n        //     }\r\n        // }\r\n\r\n        $apply.addEventListener(\"click\", (e) => {\r\n            const action = e.target.dataset.action;\r\n            if (action) {\r\n                console.log(`clicked on btn ${action}`);\r\n                if (action === \"ok\") {\r\n                    if (content.type==='input') {\r\n                        const value =\r\n                            document.getElementById(content.id).value;\r\n                        if (value) {\r\n                            resolve(value);\r\n                        }\r\n                        else {\r\n                            toggleStateById('input_a', 0, 1)\r\n                        }\r\n                    } else {\r\n                        resolve(true);\r\n                    }\r\n                }\r\n                resolve(false);\r\n                document.body.removeChild($apply);\r\n            }\r\n        });\r\n    });\r\n};","import { serverRequest } from \"../classes/serverReq\";\r\n\r\nexport const applyInvite = (href, id) => {};\r\n\r\nexport const closeModal = () => {\r\n  document.getElementById(\"modal\").classList.remove(\"visible\");\r\n};\r\n\r\nexport const openModal = () => {\r\n  document.getElementById(\"modal\").classList.add(\"visible\");\r\n};\r\n\r\nexport const getStateModal = () => {\r\n  return document.getElementById(\"modal\").classList.contains(\"visible\");\r\n};\r\n\r\nexport const getTimeUnix = () => (Date.now() / 1000) | 0;\r\n\r\nexport function ReloadName() {\r\n  const name = JSON.parse(localStorage.getItem(\"vk_auth\")).name\r\n  if (name) document.getElementById(\"name_holder\").innerHTML = name\r\n}\r\n\r\nexport const getName = () => JSON.parse(localStorage.getItem(\"vk_auth\")).name\r\nexport const getId = () => JSON.parse(localStorage.getItem(\"vk_auth\")).id\r\nexport const validSession = () => {\r\n  const data = JSON.parse(localStorage.getItem(\"vk_auth\"));\r\n  return data && data.expire > getTimeUnix()\r\n}\r\n\r\nexport const getPage = () => localStorage.getItem(\"page\")\r\nexport const setPage = value => localStorage.setItem(\"page\", value)\r\n\r\nexport function Auth(callback) {\r\n  if (validSession()) {\r\n    callback(false);\r\n  } else {\r\n    new Promise((resolve, reject) => {\r\n      const $btn_auth = document.createElement(\"div\");\r\n      $btn_auth.classList.add(\"modal\", \"center-items\", \"visible\");\r\n      $btn_auth.id = \"modal\";\r\n      $btn_auth.innerHTML += `\r\n        <div class=\"btn auth\" id=\"btn_vk_auth\" data-action=\"login\">Авторизация через ВК</div>\r\n      `;\r\n      document.body.appendChild($btn_auth);\r\n      $btn_auth.addEventListener(\"click\", function (e) {\r\n        const action = e.target.dataset.action;\r\n        if (action === \"login\") {\r\n          VK.Auth.login((data) => {\r\n            if (data.session) {\r\n              console.log(\"auth | success\");\r\n              const { expire, user } = data.session;\r\n              const { id, first_name, last_name } = user;\r\n              localStorage.setItem(\r\n                \"vk_auth\",\r\n                JSON.stringify({\r\n                  expire,\r\n                  id,\r\n                  name: `${first_name} ${last_name}`,\r\n                })\r\n              );\r\n              document.body.removeChild($btn_auth);\r\n              serverRequest.addStudent(id, `${first_name} ${last_name}`);\r\n              resolve(false);\r\n            } else {\r\n              resolve(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    })\r\n      .then(callback)\r\n  }\r\n}\r\n\r\nexport const createQueueText = list => list.map((item, index) => `${index+1} ${item.nameOfStudent}`).join('\\n')\r\n\r\nexport const copyToClipboard = text => {\r\n  if (window.clipboardData && window.clipboardData.setData) {\r\n      // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\r\n      return window.clipboardData.setData(\"Text\", text);\r\n\r\n  }\r\n  else if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\r\n      var textarea = document.createElement(\"textarea\");\r\n      textarea.textContent = text;\r\n      textarea.style.position = \"fixed\";  // Prevent scrolling to bottom of page in Microsoft Edge.\r\n      document.body.appendChild(textarea);\r\n      textarea.select();\r\n      try {\r\n          return document.execCommand(\"copy\");  // Security exception may be thrown by some browsers.\r\n      }\r\n      catch (ex) {\r\n          console.warn(\"Copy to clipboard failed.\", ex);\r\n          return prompt(\"Copy to clipboard: Ctrl+C, Enter\", text);\r\n      }\r\n      finally {\r\n          document.body.removeChild(textarea);\r\n      }\r\n  }\r\n}","import { getListNotice, serverRequest } from \"./serverReq\";\r\nimport { apply } from \"../plugins/ApplyNotice\"\r\nimport { getId } from \"../util/util\";\r\n\r\nexport class Notice {\r\n    constructor(id) {\r\n        this.id = id;\r\n        this.setup();\r\n    }\r\n    setup() {\r\n        //this.noticeList = await getListNotice(this.id);\r\n        this.noticeList = [\r\n            {\r\n                type: \"invite\",\r\n                id: 0,\r\n                Qname: \"История\",\r\n                Qhash: \"hAY90La\",\r\n            },\r\n            {\r\n                type: \"swap\",\r\n                id: 1,\r\n                Q: {\r\n                    hash: \"lAWDuo31\",\r\n                    name: \"Английский\",\r\n                },\r\n                sender: {\r\n                    id: 25,\r\n                    name: \"Андрей Новиков\",\r\n                    position: 5,\r\n                },\r\n                recipient: {\r\n                    id: 89,\r\n                    position: 9,\r\n                },\r\n            },\r\n            {\r\n                type: \"update\",\r\n                update: {\r\n                    version: \"0.4.13\",\r\n                    codeName: \"Круто все\",\r\n                    vkLink: \"vk.com\",\r\n                },\r\n            },\r\n        ];\r\n    }\r\n    renderNotice() {\r\n        document.getElementById(\"modal-notice\").innerHTML = `\r\n\t\t<div class=\"notice Ntitle padding-content center-items\">Ваши уведомления<div class=\"btn back\" data-action=\"close\"></div></div>\r\n\t\t\t${this.listToHtml()}\r\n\t\t`;\r\n    }\r\n    open() {\r\n        this.$notice = document.createElement(\"div\");\r\n        this.$notice.classList.add(\r\n            \"modal\",\r\n            \"visible\",\r\n            \"center-items\",\r\n            \"flex-column\",\r\n        );\r\n        this.$notice.id = \"modal-notice\";\r\n        this.$notice.dataset.action = \"close\";\r\n        document.body.appendChild(this.$notice);\r\n        this.renderNotice();\r\n        this.$notice.addEventListener(\"click\", this.clickHandler.bind(this));\r\n    }\r\n    close() {\r\n        this.$notice.removeEventListener(\"click\", this.clickHandler);\r\n        document.body.removeChild(this.$notice);\r\n    }\r\n    clickHandler(e) {\r\n        const action = e.target.dataset.action;\r\n        const content = e.target.dataset.content;\r\n        if (action) {\r\n            console.log(\r\n                `Clicked on notice {id:${e.target.id}, action:${action}, content:${content}}`,\r\n            );\r\n            switch (action) {\r\n                case \"close\": {\r\n                    this.close();\r\n                    break;\r\n                }\r\n                case \"apply\": {\r\n                    apply(\"Введите номер задания\", {\r\n                        id : 'apps_input',\r\n                        type : 'input',\r\n                        html : input()\r\n                    }).then((data) => {\r\n                        if (data) {\r\n                            this.noticeList = this.noticeList.filter(\r\n                                (item) => item.id !== +content,\r\n                            );\r\n                            // !serverReq\r\n                            this.renderNotice();\r\n                        }\r\n                    });\r\n                    break;\r\n                }\r\n                case \"swap\": {\r\n                    this.noticeList = this.noticeList.filter(\r\n                        (item) => item.id !== +content,\r\n                    );\r\n                    this.renderNotice();\r\n                    console.log(content);\r\n                    break;\r\n                }\r\n                case \"delete\": {\r\n                    apply(\"Вы точно хотите удалить это уведомление?\").then(\r\n                        (data) => {\r\n                            if (data) {\r\n                                this.noticeList = this.noticeList.filter(\r\n                                    (item) => item.id !== +content,\r\n                                );\r\n                                // !serverReq\r\n                                this.renderNotice();\r\n                            }\r\n                        },\r\n                    );\r\n                    console.log(`notice ${content} is deleted.`);\r\n                    // !serverReq\r\n                    break;\r\n                }\r\n                case \"readMore\": {\r\n                    console.log(content);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    listToHtml() {\r\n        return this.noticeList.length > 0\r\n            ? this.noticeList\r\n                  .map((item) => {\r\n                      switch (item.type) {\r\n                          case \"invite\": {\r\n                              return `\r\n\t\t\t\t\t\t\t<div class=\"notice invite padding-content center-items flex-column\" id=${item.id}>\r\n\t\t\t\t\t\t\t\tПриглашение в очередь ${item.Qname}\r\n\t\t\t\t\t\t\t\t<div class=\"btn-container flex-row\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"btn apply\" data-action=\"apply\" data-content=${item.id} data-src=${item.Qhash}>Принять</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"btn close\" data-action=\"delete\" data-content=${item.id}>Отказаться</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t`;\r\n                          }\r\n                          case \"swap\": {\r\n                              return `\r\n\t\t\t\t\t\t\t<div class=\"notice swap padding-content center-items flex-column\" id=${\r\n                                item.id\r\n                            }>\r\n\t\t\t\t\t\t\t\tСтудент ${item.sender.name} предлагает вам поменяться с ним местами\r\n\t\t\t\t\t\t\t\t<div class=\"swap-state\">\r\n\t\t\t\t\t\t\t\t\t\t${item.Q.name} :\r\n\t\t\t\t\t\t\t\t\t\t<span class=${\r\n                                            item.sender.position >\r\n                                            item.recipient.position\r\n                                                ? \"red\"\r\n                                                : \"green\"\r\n                                        }>${item.recipient.position}</span> \r\n\t\t\t\t\t\t\t\t\t\t-> \r\n\t\t\t\t\t\t\t\t\t\t<span class=${\r\n                                            item.sender.position >\r\n                                            item.recipient.position\r\n                                                ? \"green\"\r\n                                                : \"red\"\r\n                                        }>${item.sender.position}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"btn-container flex-row\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"btn apply\" data-action=\"swap\" data-content=${item.id} data-src=\"${\r\n                                  item.sender.id\r\n                              }|${item.recipient.id}|${\r\n                                  item.Q.hash\r\n                              }\">Принять</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"btn close\" data-action=\"delete\" data-content=${\r\n                                            item.id\r\n                                        }>Отказаться</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t`;\r\n                          }\r\n                          case \"update\": {\r\n                              return `\r\n\t\t\t\t\t\t\t<div class=\"notice update padding-content center-items flex-row\">\r\n\t\t\t\t\t\t\t\tОбновление ${item.update.version} ${item.update.codeName}\r\n\t\t\t\t\t\t\t\t<div class=\"btn readMore\" data-action=\"readMore\" data-content=${item.update.vkLink}>\r\n\t\t\t\t\t\t\t\t\t<a href=${item.update.vkLink}>Узнать об изменениях</a>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t`;\r\n                          }\r\n                      }\r\n                  })\r\n                  .join(\"\")\r\n            : `<div class=\"notice padding-content center-items border-2px\">Тут пусто :)</div>`;\r\n    }\r\n}\r\n\r\nexport const InviteApply = (hash) => {\r\n    apply(\"Введите номер задания\", {\r\n        id : 'apps_input',\r\n        type : 'input',\r\n        html : input()\r\n    }).then((data) => {\r\n        if (data) {\r\n            const id = getId();\r\n            serverRequest.appendQ(id, hash, data).then((response) => {\r\n                history.pushState('', document.title, window.location.pathname)\r\n                window.location.reload();\r\n                if (response !== -1) {\r\n                    console.log(\r\n                        `student ${id} with app ${data} added to Q hash:${hash}`,\r\n                    );\r\n                }\r\n                else {\r\n                    $notice('Данная ссылка не работает!')\r\n                }\r\n            })\r\n        }\r\n    });\r\n};\r\n\r\nconst input = () => `\r\n    <div class=\"input_group\" id=\"input_a\">\r\n        <input id=\"apps_input\" type=\"number\" min=\"1\" max=\"99\" maxlength=\"2\" data-to=\"CountApps\" autocomplete=\"off\" required=\"\">\r\n        <label class=\"field_name\">Ваша задача</label>\r\n        <i class=\"fi fi-rs-check\"></i>\r\n        <i class=\"fi fi-rs-exclamation\"></i>\r\n        <div class=\"error_message center-items\">\r\n            Поле должно быть заполнено!\r\n        </div>\r\n        <div class=\"error_type center-items\">\r\n            Недопустимый символ или значение!\r\n        </div>\r\n    </div>\r\n`\r\n\r\nexport const $notice = (text) => {\r\n    const cooldown = 5000;\r\n    const $nt = document.createElement(\"div\");\r\n    $nt.classList.add(\"notification\", \"center-items\");\r\n    $nt.innerHTML = `\r\n        <div class=\"notification-content padding-content\">\r\n            ${text}\r\n            <div class=\"countdown\"></div>\r\n        </div>\r\n    `;\r\n    document.body.appendChild($nt);\r\n    new Promise((resolve, reject) => {\r\n        setTimeout(resolve, cooldown);\r\n    }).then(() => {\r\n        document.body.removeChild($nt);\r\n    });\r\n};\r\n","import { $notice } from \"./notice\";\r\nimport { apply } from '../plugins/ApplyNotice'\r\n\r\nconst capitalize = s => (s && s[0].toUpperCase() + s.slice(1)) || \"\"\r\n\r\nexport const $Qmaker = function (callback) {\r\n\r\n    function open() {\r\n        const $f = document.createElement(\"div\");\r\n        $f.classList.add(\"modal\", \"visible\", \"center-items\");\r\n        $f.dataset.action = \"close\";\r\n        $f.innerHTML = pattern();\r\n\t\tdocument.body.appendChild($f);\r\n        return $f;\r\n    }\r\n\r\n\tvar options = false\r\n\r\n\tconst controlInput = e => {\r\n\t\te.preventDefault();\r\n\t\tconst number = e.target.valueAsNumber\r\n\t\t\r\n\t\tif (number > 100 || number <= 0 || (isNaN(parseInt(e.data)) && e.data)) {\r\n\t\t\te.target.value = ''\r\n\t\t\ttoggleStateById(e.target.parentNode.id, 0, 2)\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttoggleStateById(e.target.parentNode.id, 1)\r\n\t\t}\r\n\t}\r\n\r\n    const __popup__ = open();\r\n\r\n\tfunction close() {\r\n        document.body.removeChild(__popup__);\r\n    }\r\n\r\n\t//? inputs\r\n\tconst $name = document.getElementById('input_name')\r\n\tconst $apps = document.getElementById('input_apps')\r\n\tconst $date = document.getElementById('input_date')\r\n\t//? buttons\r\n\tconst $cmnB = document.getElementById('C_btn')\r\n\tconst $smrB = document.getElementById('S_btn')\r\n\r\n\tconst toggleStateById = (id, flag, message) => {\r\n\t\tconst $elem = document.getElementById(id)\r\n\t\tif (flag) {\r\n\t\t\t$elem.classList.remove('error', message === 1 ? 'message' : message === 2 ? 'type_err' : null);\r\n\t\t\t$elem.classList.add('success');\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$elem.classList.add('error', message === 1 ? 'message' : message === 2 ? 'type_err' : null);\r\n\t\t\t$elem.classList.remove('success');\r\n\t\t}\r\n\t}\r\n\r\n\tconst parseValues = () => {\r\n\t\treturn {\r\n\t\t\tname : $name.value.trim(),\r\n\t\t\ttype : options,\r\n\t\t\tdependOnApps : options ? $apps.value ? 1 : 0 : 0,\r\n\t\t\tCountApps : options ? $apps.value || 0 : 0,\r\n\t\t\tdependOnDate : options ? $date.value ? 1 : 0 : 0,\r\n\t\t\tDateToPass: options ? $date.value || 0 : 0\r\n\t\t}\r\n\t}\r\n\r\n\tconst checkInputs = () => {\r\n\t\tif ($name.value) {\r\n\t\t\ttoggleStateById('name_input', 1)\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttoggleStateById('name_input', 0, 1)\r\n\t\t}\r\n\t\tif (options) {\r\n\t\t\tif (!$apps.value && !$date.value) {\r\n\t\t\t\ttoggleStateById('apps_input', 0, 1)\r\n\t\t\t\ttoggleStateById('date_input', 0, 1)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif ($apps.value)\r\n\t\t\t\t\ttoggleStateById('apps_input', 1)\r\n\t\t\t\tif ($date.value)\r\n\t\t\t\t\ttoggleStateById('date_input', 1)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn $name.value &&\r\n\t\t\t   (options ? \r\n\t\t\t   $apps.value || $date.value :\r\n\t\t\t   true)\r\n\t}\r\n\r\n\tfunction toggleState() {\r\n\t\t$cmnB.classList.toggle('active')\r\n\t\t$smrB.classList.toggle('active')\r\n\t\toptions = $smrB.classList.contains('active')\r\n\t}\r\n\r\n\tconst actions = {\r\n\t\tswitch : id => {\r\n\t\t\tconst $btn = document.getElementById(id)\r\n\t\t\tif (!$btn.classList.contains('active')) {\r\n\t\t\t\ttoggleState()\r\n\t\t\t\tif (id === 'C_btn') document.getElementById('smart_options').classList.remove('active')\r\n\t\t\t\telse document.getElementById('smart_options').classList.add('active')\r\n\t\t\t}\r\n\t\t},\r\n\t\tclose : () => {\r\n\t\t\tapply('Вы точно хотите отменить создание очереди?').then(e => {\r\n\t\t\t\tif (e) close()\r\n\t\t\t})\r\n\t\t},\r\n\t\tcreate : () => {\r\n\t\t\tif (checkInputs()) {\r\n\t\t\t\tconst options = parseValues()\r\n\t\t\t\tapply('Подтвердите создание очереди с параметрами', {\r\n\t\t\t\t\ttype : 'div',\r\n\t\t\t\t\thtml : `\r\n\t\t\t\t\t\t<div class=\"options center-items flex-column w100\">\r\n\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Название очереди</span> <i>${options.name}</i></div>\r\n\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Тип очереди</span> <i>${!options.type ? 'обычная' : 'умная'}</i></div>\r\n\t\t\t\t\t\t\t${options.dependOnApps ? \r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Зависимость от кол-ва задач</span> <i>${options.dependOnApps ? '+' : '-'}</i></div>\r\n\t\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Кол-во задач</span> <i>${options.CountApps}</i></div>\r\n\t\t\t\t\t\t\t\t` : ''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t${options.dependOnDate ? \r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Зависимость от даты</span> <i>${options.dependOnDate ? '+' : '-'}</i></div>\r\n\t\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Кол-во занятий на сдачу</span> <i>${options.DateToPass}</i></div>\r\n\t\t\t\t\t\t\t\t` : ''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t`,\r\n\t\t\t\t\tid : null\r\n\t\t\t\t}).then(e => {\r\n\t\t\t\t\tif (e) {\r\n\t\t\t\t\t\tcallback(parseValues())\r\n\t\t\t\t\t\t$notice(`Очередь ${$name.value} успешно создана`)\r\n\t\t\t\t\t\tclose()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//! Добавить подсказки\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    \r\n\t__popup__.addEventListener(\"click\", e => {\r\n\t\te.preventDefault()\r\n\t\tconst action = e.target.dataset.action\r\n\t\tif (action) {\r\n\t\t\tactions[action](e.target.id);\r\n\t\t}\r\n\t})\r\n\r\n\t$name.oninput = e => {\r\n\t\ttoggleStateById('name_input', e.target.value)\r\n\t\tif (e.data === ' ') {\r\n\t\t\te.target.value = e.target.value.replace(' ', '')\r\n\t\t}\r\n\t}\r\n\t$apps.oninput = controlInput\r\n\t$date.oninput = controlInput\r\n};\r\n\r\nconst pattern = () => `\r\n<div class=\"form padding-content center-items-inline shadow\">\r\n\t<span class=\"Qtitle\">Конструктор очередей</span>\r\n\r\n\t<div class=\"input_group\" id=\"name_input\">\r\n\t\t<input id=\"input_name\" type=\"text\" maxlength=\"32\" data-to=\"name\" autocomplete=\"off\" required/>\r\n\t\t<label class=\"field_name\">Название очереди</label>\r\n\t\t<i class=\"fi fi-rs-check\"></i>\r\n\t\t<i class=\"fi fi-rs-exclamation\"></i>\r\n\t\t<div class=\"error_message center-items\">\r\n\t\t\tПоле должно быть заполнено!\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"type_selector flex-row\">\r\n\t\t<div class=\"common padding-content center-items active\" data-action=\"switch\" id=\"C_btn\">Обычная</div>\r\n\t\t<div class=\"smart padding-content center-items\" data-action=\"switch\" id=\"S_btn\">Умная</div>\r\n\t</div>\r\n\r\n\t<div class=\"smart_options flex-column\" id=\"smart_options\">\r\n\t\t<div class=\"qm_title flex-row center-items\">\r\n\t\t\t<span>Настройки умной очереди</span>\r\n\t\t\t<div class=\"info center-items\">i</div>\r\n\t\t</div>\r\n\t\t<div class=\"input_group\" id=\"apps_input\">\r\n\t\t\t<input id=\"input_apps\" type=\"number\" min=\"1\" max=\"99\" maxlength=\"2\" data-to=\"CountApps\" autocomplete=\"off\" required/>\r\n\t\t\t<label class=\"field_name\">Количество задач</label>\r\n\t\t\t<i class=\"fi fi-rs-check\"></i>\r\n\t\t\t<i class=\"fi fi-rs-exclamation\"></i>\r\n\t\t\t<div class=\"error_message center-items\">\r\n\t\t\t\tХотя бы одно поле должно быть заполнено!\r\n\t\t\t</div>\r\n\t\t\t<div class=\"error_type center-items\">\r\n\t\t\t\tНедопустимый символ или значение!\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"input_group\" id=\"date_input\">\r\n\t\t\t<input id=\"input_date\" type=\"number\" min=\"1\" max=\"99\" maxlength=\"2\" data-to=\"DateToPass\" autocomplete=\"off\" required/>\r\n\t\t\t<label class=\"field_name\">Количество занятий для сдачи</label>\r\n\t\t\t<i class=\"fi fi-rs-check\"></i>\r\n\t\t\t<i class=\"fi fi-rs-exclamation\"></i>\r\n\t\t\t<div class=\"error_message center-items\">\r\n\t\t\t\tХотя бы одно поле должно быть заполнено!\r\n\t\t\t</div>\r\n\t\t\t<div class=\"error_type center-items\">\r\n\t\t\t\tНедопустимый символ или значение!\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"btn_container flex-row\">\r\n\t\t<div class=\"btn\" data-action=\"create\" id=\"create\">Создать очередь</div>\r\n\t\t<div class=\"btn\" data-action=\"close\" id=\"close\">Отмена</div>\r\n\t</div>\r\n</div>\r\n`;","import { QueueBlock } from \"./queue\";\r\nimport { serverRequest } from \"./serverReq\";\r\nimport { $Qmaker } from \"./Qmaker\";\r\nimport { $notice } from \"../classes/notice\";\r\nimport { createQueueText } from \"../util/util\";\r\nimport { copyToClipboard } from \"../util/util\";\r\nimport { getId } from \"../util/util\";\r\n\r\nexport class QList {\r\n    #list = [];\r\n    constructor() {\r\n        this.selected = null;\r\n        this.min = true;\r\n        this.canAddQueue = false;\r\n        this.eventListeners = false;\r\n        this.previewSelected = -1;\r\n        this.setup();\r\n    }\r\n\r\n    async parseListOfQueues() {\r\n        const values = await serverRequest.getQueuesById(getId());\r\n        this.#list = [];\r\n        if (values != -1) {\r\n            await Promise.all(\r\n                values.map(async (item) => {\r\n                    const name = (\r\n                        await serverRequest.getQueuePropertyById(item.idQueue)\r\n                    ).subjectName;\r\n                    const { idQueue, positionStudent } = item;\r\n\r\n                    this.#list.push(\r\n                        new QueueBlock({ idQueue, name, positionStudent }, this.canAddQueue),\r\n                    );\r\n                }),\r\n            );\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this.#list = [];\r\n        this.selected = null;\r\n        this.min = true;\r\n        this.allMin();\r\n    }\r\n\r\n    setup() {}\r\n\r\n    async toHtml() {\r\n        var html = this.min\r\n            ? this.#list.map((item) => item.toHtml()).join(\"\")\r\n            : this.selected.toListHtml(\r\n                  await serverRequest.getListOfStudentInQueueById(\r\n                      this.selected.ID,\r\n                  ),\r\n              );\r\n        if (this.min && this.canAddQueue) {\r\n            html += `\r\n                <div class=\"QmakerContainer center-items\" data-action=\"create\">\r\n                    <div class=\"Qmaker center-items\" id=\"Qmaker\" data-action=\"create\">\r\n                        Создать очередь\r\n                    </div>\r\n                </div>\r\n            `;\r\n        }\r\n        return html;\r\n    }\r\n\r\n    async render() {\r\n        document.getElementById(\"content-main\").innerHTML = await this.toHtml();\r\n        if (this.min) //this.addQuicklook();\r\n        if (!this.eventListeners) this.addEventListeners();\r\n    }\r\n    /**\r\n     *\r\n     * @param {MouseEvent} e\r\n     */\r\n    quicklook(e) {\r\n        e.preventDefault();\r\n        if (\r\n            e.target.dataset.action === \"open\" &&\r\n            (e.ctrlKey || e.metaKey) &&\r\n            this.previewSelected === -1\r\n        ) {\r\n            serverRequest.getListOfStudentInQueueById(e.target.id).then(data => {\r\n                this.previewSelected = e.target.id;\r\n                this.$__preview__ = document.createElement(\"div\");\r\n                this.$__preview__.classList.add(\r\n                    \"quicklook\",\r\n                    \"center-items\",\r\n                    \"flex-column\",\r\n                );\r\n                this.$__preview__.innerHTML = `<div class=\"quicklook__title\">QuickLook</div><span>${e.target.dataset.name}:</span>`;\r\n                this.$__preview__.innerHTML += data.responseAboutStudentList.map((item, index) => `<div class=\"quicklook__item ${item.idStudent === getId() ? \"u\" : \"\"}\">${index+1} ${item.nameOfStudent}</div>`).join('')\r\n                e.target.appendChild(this.$__preview__);\r\n            })\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @param {MouseEvent} e\r\n     */\r\n    closeQuicklook(e) {\r\n        e.preventDefault();\r\n        if (this.previewSelected === e.target.id) {\r\n            e.currentTarget.removeChild(this.$__preview__);\r\n            this.previewSelected = -1;\r\n        }\r\n    }\r\n\r\n    addQuicklook() {\r\n        document.querySelectorAll(\".qItem\").forEach((elem) => {\r\n            elem.addEventListener(\"mouseover\", this.quicklook.bind(this));\r\n            elem.addEventListener(\"mouseleave\", this.closeQuicklook.bind(this));\r\n        });\r\n    }\r\n\r\n    addEventListeners() {\r\n        if (this.#list.length > 0 || this.canAddQueue) {\r\n            this.eventListeners = true;\r\n            document.getElementById(\"content-main\").addEventListener(\r\n                \"click\",\r\n                (e) => {\r\n                    e.preventDefault();\r\n                    const action = e.target.dataset.action;\r\n                    if (action) {\r\n                        switch (action) {\r\n                            case \"open\": {\r\n                                console.log(\"open\");\r\n                                this.selected = this.#list.find(\r\n                                    (item) => item.ID === +e.target.dataset.id,\r\n                                );\r\n                                this.selected.min = false;\r\n                                this.min = false;\r\n                                this.render();\r\n                                break;\r\n                            }\r\n                            case \"back\": {\r\n                                this.allMin();\r\n                                this.selected = null;\r\n                                this.render();\r\n                                break;\r\n                            }\r\n                            case \"copy\": {\r\n                                serverRequest\r\n                                    .getListOfStudentInQueueById(\r\n                                        +e.target.dataset.id,\r\n                                    )\r\n                                    .then((item) => {\r\n                                        copyToClipboard(\r\n                                            createQueueText(\r\n                                                item.responseAboutStudentList,\r\n                                            ),\r\n                                        );\r\n                                        $notice(\r\n                                            \"Очередь скопирована в буфер обмена\",\r\n                                        );\r\n                                    });\r\n                                break;\r\n                            }\r\n                            case \"create\": {\r\n                                $Qmaker(async (options) => {\r\n                                    const {\r\n                                        name,\r\n                                        type,\r\n                                        dependOnApps,\r\n                                        CountApps,\r\n                                        DependOnDate,\r\n                                        DateToPass,\r\n                                    } = options;\r\n\r\n                                    const hash = (await serverRequest.createQ(\r\n                                        name,\r\n                                        type,\r\n                                        dependOnApps,\r\n                                        CountApps,\r\n                                        DependOnDate,\r\n                                        DateToPass,\r\n                                        getId()\r\n                                    )).response\r\n\r\n                                    copyToClipboard(\r\n                                        `http://25.85.15.23:1234/#${hash}`\r\n                                    );\r\n                                    await this.render();\r\n                                });\r\n                                break;\r\n                            }\r\n                            case \"delete\": {\r\n                                break;\r\n                            }\r\n                            case \"exit\" : {\r\n                                serverRequest.leaveFromQueue(e.target.dataset.target, getId()).then(() => {\r\n                                    //window.location.reload();\r\n                                })\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                true,\r\n            );\r\n        }\r\n    }\r\n\r\n    deleteEventListeners() {}\r\n\r\n    backButtonClick() {\r\n        this.allMin();\r\n        this.min = true;\r\n        this.selected = null;\r\n        this.deleteEventListeners();\r\n        this.render();\r\n    }\r\n\r\n    allMin() {\r\n        this.min = true;\r\n        this.#list.forEach((item) => (item.min = true));\r\n    }\r\n}\r\n","export const $modalWindow = content => {\r\n  const open = () => {\r\n    const $modal = document.createElement('div');\r\n    $modal.classList.add('modal', 'visible', 'center-items');\r\n    $modal.dataset.action = 'close';\r\n    $modal.innerHTML += `\r\n      <div class=\"content flex-column center-items padding-content\">\r\n        <div class=\"btn close center-items\" data-action='close'>X</div>\r\n        <div class=\"modal_title center-items\">${content.title}</div>\r\n        ${parseContent(content)}\r\n      </div>\r\n    `\r\n\r\n    document.body.appendChild($modal);\r\n    return $modal\r\n  }\r\n\r\n  const __popup__ = open()\r\n  __popup__.addEventListener('click', e => {\r\n    e.preventDefault()\r\n    const action = e.target.dataset.action\r\n\r\n    if (action) {\r\n      document.body.removeChild(__popup__)\r\n    }\r\n  })\r\n}\r\n\r\nconst parseContent = content => content.elements.map(el => `<${el.type} class=${el.class || ''} id=${el.id || ''}>${el.innerHTML || ''}</${el.type}>`).join('')\r\n\r\n/*\r\n\r\n{\r\n  title : 'DOAPW',\r\n  elements : [\r\n    {\r\n      type : 'div',\r\n      innerHtml : \"mdaw\",\r\n      class : '',\r\n      id : \"\"\r\n    },\r\n    {\r\n\r\n    }\r\n  ],\r\n  buttons : [\r\n    'ok',\r\n    'close'\r\n  ]\r\n}\r\n\r\n*/","import { QList } from \"./Qlist\";\r\nimport { serverRequest } from \"./serverReq\";\r\nimport { ReloadName, setPage } from \"../util/util\";\r\nimport { Notice } from \"./notice\";\r\nimport { $modalWindow } from \"../plugins/modal\"\r\nimport { getName } from \"../util/util\";\r\nimport { $Qmaker } from \"./Qmaker\";\r\n\r\nexport class App {\r\n  #qList = new QList();\r\n  #notice = new Notice(45);\r\n  constructor() {\r\n    this.error = false;\r\n    this.#setup();\r\n  }\r\n\r\n  show_error() {\r\n    document.getElementById(\"content-main\").innerHTML =\r\n      '<div class=\"error\">Сайт не работает. Звоните фиксикам или попробуйте обновить страницу :)</div>';\r\n  }\r\n\r\n  #header() {\r\n    const $header = document.createElement('header')\r\n    $header.classList.add('center-items-inline')\r\n    $header.innerHTML = `\r\n    <div class=\"container center-items-inline\">\r\n      <div class=\"logo border-2px\"></div>\r\n      <span class=\"title\">Удобная очередь</span>\r\n    </div>\r\n    <div class=\"profile center-items-inline\">\r\n        <div class=\"name center-items\" id=\"name_holder\"></div>\r\n        <div class=\"p_btn notice_btn center-items padding-lr\" id=\"noticeList\"></div>\r\n        <div class=\"p_btn home center-items padding-lr\" id=\"home\"></div>\r\n        <div class=\"p_btn logout center-items padding-lr\" id=\"logout\"></div>\r\n    </div>`\r\n    document.body.appendChild($header)\r\n  }\r\n\r\n  #main() {\r\n    const $main = document.createElement('main')\r\n    $main.classList.add('flex-space-center-wrap')\r\n    $main.id = 'content-main'\r\n    document.body.appendChild($main)\r\n  }\r\n\r\n  #footer() {\r\n    const $footer = document.createElement('footer')\r\n    $footer.classList.add('center-items-inline')\r\n    $footer.innerHTML = `\r\n    <div class=\"dev flex-row\">\r\n      <span>Разработчики:</span>\r\n      <div class=\"link center-items padding-lr\" data-action=\"open_modal\" data-target=\"kriminal589\">@Kriminal589</div>\r\n      <div class=\"link center-items padding-lr\" data-action=\"open_modal\" data-target=\"viltskaa\">@Viltskaa</div>\r\n    </div>`\r\n    document.body.appendChild($footer)\r\n  }\r\n\r\n  async #setup() {\r\n    document.body.innerHTML = ''\r\n    this.#header()\r\n    this.#main()\r\n    this.#footer()\r\n    setPage('main')\r\n\r\n    document.getElementById(\"logout\").onclick = function () {\r\n      setPage('home')\r\n      console.log('logout init');\r\n      VK.Auth.getLoginStatus(function(response){\r\n        if (response) {\r\n          VK.Auth.logout(function(data) {\r\n            console.log(data);\r\n            localStorage.removeItem('vk_auth')\r\n            document.location.reload();\r\n          });\r\n        }\r\n      })\r\n    }\r\n    document.getElementById('noticeList').addEventListener('click', this.openNotice.bind(this));\r\n    document.getElementById('home').addEventListener('click', this.openHome.bind(this));\r\n    document.querySelectorAll('.link').forEach(item => {\r\n      item.addEventListener('click', e => {\r\n        e.preventDefault()\r\n        $modalWindow({\r\n          title : item.dataset.target,\r\n          elements : [\r\n            {\r\n              type : 'div',\r\n              innerHTML : 'vk',\r\n              class : 'dev-item center-items'\r\n            },\r\n            {\r\n              type : 'div',\r\n              innerHTML : 'github',\r\n              class : 'dev-item center-items'\r\n            }\r\n          ]\r\n        })\r\n      })\r\n    })\r\n    \r\n    const { id, name } = JSON.parse(localStorage.getItem(\"vk_auth\"));\r\n    const response = await serverRequest.addStudent(id, name);\r\n    \r\n    this.#qList.canAddQueue = response.response || false;\r\n\r\n    if (response === -1) {\r\n      this.error = true;\r\n    } else {\r\n      await this.#qList.parseListOfQueues(id);\r\n    }\r\n    this.render();\r\n  }\r\n\r\n  openHome() {\r\n    setPage('home');\r\n    window.location.reload();\r\n  }\r\n\r\n  openNotice() {\r\n    this.#notice.open()\r\n    console.log('notifications list open.')\r\n  }\r\n\r\n  render() {\r\n    ReloadName();\r\n    if (this.error) {\r\n      this.show_error();\r\n    } else {\r\n      //const data = JSON.parse(localStorage.getItem(\"vk_auth\")).name\r\n      this.#qList.render();\r\n      console.log(\"render...\");\r\n    }\r\n  }\r\n}\r\n","import { getPage, validSession } from \"../util/util\";\r\n\r\nexport const homepage = (callback) => {\r\n    new Promise((resolve, reject) => {\r\n        const session = validSession()\r\n        if (getPage() !== \"home\" && session) resolve(false);\r\n\r\n        const $page = document.createElement(\"div\");\r\n        $page.classList.add(\"homepage\");\r\n        $page.innerHTML = `\r\n            <div class=\"circle\" id=\"a\"></div>\r\n            <div class=\"square\" id=\"b\"></div>\r\n            <div class=\"homepage_content flex-row\">\r\n                <div class=\"left flex-column\">\r\n                    <div class=\"nav flex-row\">\r\n                        <div class=\"h_btn about\" data-action=\"about\">Сервис</div>\r\n                        <div class=\"h_btn link\" data-action=\"link\">Связь</div>\r\n                    </div>\r\n\r\n                    <div class=\"homepage_title flex-column\">\r\n                        <span>Удобная</span>\r\n                        <span>Очередь</span>\r\n                        <span>для студентов</span>\r\n                        <span>разработаная такими же студентами</span>\r\n                    </div>\r\n                    ${\r\n                        session\r\n                            ? '<div class=\"authbtn center-items\" data-action=\"close\">Перейти к очередям</div>'\r\n                            : '<div class=\"authbtn center-items\" data-action=\"auth\">Авторизация через Вконтакте</div>'\r\n                    }\r\n                </div>\r\n                <div class=\"right center-items\">\r\n                    <div class=\"news_page custom-scrollbar\">\r\n                        <div class=\"news_item center-items\">\r\n                            <div class=\"news_title\">Обновление 1.1</div>\r\n                            <div class=\"description\">lol</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n        document.body.appendChild($page);\r\n        $page.addEventListener(\"click\", (e) => {\r\n            const action = e.target.dataset.action;\r\n\r\n            if (action) {\r\n                switch (action) {\r\n                    case \"auth\": {\r\n                        VK.Auth.login((data) => {\r\n                            if (data.session) {\r\n                                console.log(\"auth | success\");\r\n                                const { expire, user } = data.session;\r\n                                const { id, first_name, last_name } = user;\r\n                                localStorage.setItem(\r\n                                    \"vk_auth\",\r\n                                    JSON.stringify({\r\n                                        expire,\r\n                                        id,\r\n                                        name: `${first_name} ${last_name}`,\r\n                                    }),\r\n                                );\r\n                                document.body.removeChild($page);\r\n                                resolve(false);\r\n                            } else {\r\n                                resolve(true);\r\n                            }\r\n                        });\r\n                        break;\r\n                    }\r\n                    case \"close\": {\r\n                        document.body.removeChild($page);\r\n                        resolve(false);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }).then(callback);\r\n};\r\n","import \"./styles/main.scss\";\r\nimport { App } from \"./classes/App\";\r\nimport { Auth } from \"./util/util\";\r\nimport { InviteApply } from \"./classes/notice\";\r\nimport { homepage } from \"./plugins/homepage\"\r\n\r\nwindow.onload = async () => {\r\n  //   VK.init({ apiId: 8229660 });\r\n\t// const hash = document.location.hash.replace('#', '')\r\n\t// if (hash.length > 0) {\r\n\t// \tAuth(() => {\r\n\t// \t\tInviteApply(hash);\r\n\t// \t})\r\n\t// }\r\n\t// else {\r\n\t// \thomepage(main)\r\n\t// }\r\n};\r\n\r\nconst main = error => {\r\n\tconst app = new App();\r\n\tif (error) {\r\n\t\tapp.error = true;\r\n\t\tapp.render();\r\n\t}\r\n};\r\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}