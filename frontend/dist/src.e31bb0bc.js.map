{"version":3,"sources":["classes/queue.js","classes/loadBar.js","classes/serverReq.js","plugins/ApplyNotice.js","util/util.js","classes/notice.js","classes/Qmaker.js","classes/Qlist.js","plugins/modal.js","classes/App.js","plugins/homepage.js","index.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["QueueBlock","values","min","idQueue","template","list","templateList","JSON","parse","localStorage","getItem","uid","content","name","positionStudent","div","class_","id","idStudent","HTML","ul","responseAboutStudentList","map","item","index","template_u","template_list","nameOfStudent","replace","join","vk_link","li","$LoadBar","$load","document","createElement","classList","add","hashCode","innerHTML","body","appendChild","getElementById","removeChild","String","prototype","hash","i","chr","length","charCodeAt","require","ip","port","serverRequest","idS","sendRequestAsync","idQ","app","type","dependOnApps","CountApps","DependOnDate","DateToPass","boolToInt","url","sendRequestAsyncURL","int","url_to","loadbar","load","fetch","method","headers","stringify","response","destroy","json","apply","text","html","Promise","resolve","reject","$apply","tabIndex","dataset","action","toggleStateById","flag","message","$elem","remove","$input","oninput","e","preventDefault","number","target","valueAsNumber","isNaN","parseInt","data","value","parentNode","addEventListener","console","log","applyInvite","href","closeModal","openModal","getStateModal","contains","getTimeUnix","Date","now","ReloadName","getName","getId","validSession","expire","getPage","setPage","setItem","Auth","callback","$btn_auth","VK","login","session","user","first_name","last_name","then","createQueueText","copyToClipboard","window","clipboardData","setData","queryCommandSupported","textarea","textContent","style","position","select","execCommand","ex","warn","prompt","Notice","setup","noticeList","Qname","Qhash","Q","sender","recipient","update","version","codeName","vkLink","listToHtml","$notice","renderNotice","clickHandler","bind","removeEventListener","close","input","filter","InviteApply","appendQ","location","reload","cooldown","$nt","setTimeout","capitalize","s","toUpperCase","slice","$Qmaker","open","$f","pattern","options","controlInput","__popup__","$name","$apps","$date","$cmnB","$smrB","parseValues","trim","dependOnDate","checkInputs","toggleState","toggle","actions","switch","$btn","create","QList","selected","canAddQueue","eventListeners","previewSelected","getQueuesById","all","getQueuePropertyById","subjectName","push","allMin","toHtml","getListOfStudentInQueueById","ID","toListHtml","addQuicklook","addEventListeners","ctrlKey","metaKey","$__preview__","currentTarget","querySelectorAll","forEach","elem","quicklook","closeQuicklook","find","render","createQ","deleteEventListeners","$modalWindow","$modal","title","parseContent","elements","el","class","App","error","show_error","$header","$main","$footer","onclick","getLoginStatus","logout","removeItem","openNotice","openHome","addStudent","parseListOfQueues","homepage","$page","onload","init","apiId","main","send","request","Request","res","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","exports","bundle","updateLink","link","newLink","cloneNode","split","insertBefore","nextSibling","cssTimeout","reloadCSS","links","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","onclose","removeErrorOverlay","overlay","createErrorOverlay","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"..\\src","sourcesContent":["export class QueueBlock {\r\n  constructor(values) {\r\n    this.values = values;\r\n    this.min = true;\r\n  }\r\n\r\n  get ID() {\r\n    return this.values.idQueue;\r\n  }\r\n\r\n  toHtml() {\r\n    return template(this.values);\r\n  }\r\n  toListHtml(list) {\r\n    return templateList(\r\n      this.values,\r\n      list,\r\n      JSON.parse(localStorage.getItem(\"vk_auth\")).uid\r\n    );\r\n  }\r\n}\r\n\r\nconst template = (content) => {\r\n  return `\r\n    <div class=\"qItem\" id=\"${content.idQueue}\" data-action=\"open\" data-id=\"${content.idQueue}\" data-name=\"${content.name}\">\r\n      <div class=\"qName\">${content.name}</div>\r\n      <div class=\"qPos\">Ваша позиция: ${content.positionStudent}</div>\r\n      <div class=\"btn apply\" data-action=\"passed\" data-app=\"0\">\r\n        <span class=\"btn-text\">Сдал задание</span>\r\n      </div>\r\n    </div>\r\n    `;\r\n};\r\n\r\nfunction div(content, class_ = \"\", id = \"\") {\r\n  return `<div class=\"${class_}\" id=\"${id}\">${content}</div>`;\r\n}\r\n\r\nconst templateList = (content, list, idStudent) => {\r\n  let HTML = div(\r\n    `<span>${content.name}</span>\r\n    <div class=\"btn_container flex-row\">\r\n        <div class=\"p_btn copy\" data-action=\"copy\" data-target=\"${content.idQueue}\"></div>\r\n        <div class=\"p_btn exit\" data-action=\"exit\"></div>\r\n    </div>\r\n    <div class=\"p_btn back\" data-action=\"back\"></div>`,\r\n    \"subject-name center-items\"\r\n  );\r\n  //const list = require('../test/queueList.json');\r\n  \r\n  HTML += ul(\r\n    list.responseAboutStudentList\r\n      .map((item, index) =>\r\n        `${item.idStudent}` === idStudent\r\n          ? template_u(index)\r\n          : template_list(\r\n              item.nameOfStudent.replace(\"_\", \" \"),\r\n              index,\r\n              `vk.com/id${item.id}`\r\n            )\r\n      )\r\n      .join(\"\"),\r\n    \"custom-scrollbar\"\r\n  );\r\n  return div(HTML, \"qList\", \"queueBody\");\r\n};\r\n\r\nconst template_list = (content, index, vk_link) => {\r\n  return li(\r\n    `\r\n      <div class=\"position center-items\">${index+1}</div>\r\n      <span class=\"name center-items\">${content}</span>\r\n      <div class=\"btn_container flex-row\">\r\n          <a class=\"btn vk\" href=${vk_link}>VK</a>\r\n          <div class=\"btn swap\" data-action=\"swap\" data-target=\"id\">SWAP</div>\r\n      </div>\r\n    `,\r\n    'item center-items'\r\n  )\r\n};\r\n\r\nconst ul = (content, class_, id) => `<ul class=${class_} id=\"${id}\">${content}</ul>`\r\nconst li = (content, class_, id) => `<li class=${class_} id=\"${id}\">${content}</li>`\r\n\r\nconst template_u = (index) => {\r\n  return li(\r\n    `<div class=\"position center-items\">${index+1}</div><span class=\"center-items\">Вы</span>`,\r\n    'item u center-items'\r\n  )\r\n};\r\n","export class $LoadBar {\r\n    load(id) {\r\n        const $load = document.createElement('div')\r\n        $load.classList.add('load')\r\n        $load.id = id.hashCode()\r\n        $load.classList.add('center-items')\r\n        $load.innerHTML = '<div class=\"square border-2px\"></div>'\r\n        document.body.appendChild($load)\r\n        this.id = id\r\n    }\r\n    destroy() {\r\n        const $load = document.getElementById(this.id.hashCode())\r\n        if ($load) {\r\n            document.body.removeChild($load)\r\n        }\r\n    }\r\n}\r\n\r\nString.prototype.hashCode = function() {\r\n    var hash = 0, i, chr;\r\n    if (this.length === 0) return hash;\r\n    for (i = 0; i < this.length; i++) {\r\n      chr   = this.charCodeAt(i);\r\n      hash  = ((hash << 5) - hash) + chr;\r\n      hash |= 0; // Convert to 32bit integer\r\n    }\r\n    return hash;\r\n};","import { $LoadBar } from \"./loadBar\";\r\n'use strict';\r\nrequire('fs')\r\n\r\nconst ip = \"25.84.228.15\";\r\nconst port = \"8080\";\r\n\r\nexport class serverRequest {\r\n  static async addStudent(idS, name) {\r\n    return await sendRequestAsync(`student/add?id=${idS}&NameOfStudent=${name.replace(\" \", \"_\")}`);\r\n  }\r\n  static async getQueuesById(idS) {\r\n    return await sendRequestAsync(`listOfQueues/getByIdStudent/${idS}`);\r\n  }\r\n  static async getQueuePropertyById(idQ) {\r\n    return await sendRequestAsync(`queue/get/${idQ}`);\r\n  }\r\n  static async getListOfStudentInQueueById(idQ) {\r\n    return await sendRequestAsync(`listOfQueues/getByIdQueue/${idQ}`);\r\n  }\r\n  static async getAllStudent() {\r\n    return await sendRequestAsync(`student/all`);\r\n  }\r\n  static async appendQ(idS, hash, app) {\r\n    return await sendRequestAsync(`listOfQueues/add/${hash}/${idS}/${app}`);\r\n  }\r\n  static async getListNotice(id) {\r\n    return []\r\n  }\r\n  // queue/add?subjectName=OOP&type=0&dependOnApps=0&countApps=0&dependOnDate=0&dateToPass=0\r\n  static async createQ(name, type, dependOnApps, CountApps, DependOnDate, DateToPass, idS) {\r\n    return await sendRequestAsync(`queue/add?subjectName=${name}&type=${boolToInt(type)}&dependOnApps=${boolToInt(dependOnApps)}&countApps=${CountApps}&dependOnDate=${boolToInt(DependOnDate)}&dateToPass=${DateToPass}idStudent=${id}`)\r\n  }\r\n  static async request(url) {\r\n    return await sendRequestAsyncURL(url)\r\n  }\r\n}\r\n\r\nconst boolToInt = int => int ? 1 : 0;\r\n\r\nasync function sendRequestAsync(url_to) {\r\n  const url = `http://${ip}:${port}/${url_to}`;\r\n  const loadbar = new $LoadBar\r\n  loadbar.load(url_to)\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\" : JSON.stringify(\"12345\")\r\n      },\r\n    });\r\n    loadbar.destroy(url_to)\r\n    return response.json();\r\n  } catch (err) {\r\n    loadbar.destroy(url_to)\r\n    return -1;\r\n  }\r\n}\r\n\r\nasync function sendRequestAsyncURL(url_to) {\r\n  $LoadBar.load()\r\n  try {\r\n    const response = await fetch(url_to, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n    $LoadBar.destroy()\r\n    return response.json();\r\n  } catch (err) {\r\n    $LoadBar.destroy()\r\n    return -1;\r\n  }\r\n}\r\n","export const apply = (text, content={\r\n    id : 0,\r\n    html : \"\",\r\n    type : \"\"\r\n}) => {\r\n    return new Promise((resolve, reject) => {\r\n        const $apply = document.createElement(\"div\");\r\n        $apply.classList.add(\"modal\", \"visible\", \"center-items\", \"flex-column\");\r\n        $apply.tabIndex = 0\r\n        $apply.id = \"modal-apply\";\r\n        $apply.dataset.action = \"close\";\r\n        $apply.innerHTML = `\r\n\t\t\t<div class=\"notice apply padding-content center-items shadow flex-column\">\r\n\t\t\t${text}\r\n\t\t\t${content.html || \"\"}\r\n\t\t\t<div class=\"btn-container flex-row\">\r\n\t\t\t\t\t<div class=\"btn apply\" data-action=\"ok\">Подтвердить</div>\r\n\t\t\t\t\t<div class=\"btn close\" data-action=\"cancel\">Отмена</div>\r\n\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n        document.body.appendChild($apply);\r\n\r\n        const toggleStateById = (id, flag, message) => {\r\n            const $elem = document.getElementById(id)\r\n            if (flag) {\r\n                $elem.classList.remove('error', message === 1 ? 'message' : message === 2 ? 'type_err' : null);\r\n                $elem.classList.add('success');\r\n            }\r\n            else {\r\n                $elem.classList.add('error', message === 1 ? 'message' : message === 2 ? 'type_err' : null);\r\n                $elem.classList.remove('success');\r\n            }\r\n        }\r\n\r\n        if (content.type === 'input') {\r\n            const $input = document.getElementById(content.id)\r\n            $input.oninput = e => {\r\n                e.preventDefault();\r\n                const number = e.target.valueAsNumber\r\n                \r\n                if (number > 100 || number <= 0 || (isNaN(parseInt(e.data)) && e.data)) {\r\n                    e.target.value = ''\r\n                    toggleStateById(e.target.parentNode.id, 0, 2)\r\n                }\r\n                else {\r\n                    toggleStateById(e.target.parentNode.id, 1)\r\n                }\r\n            }\r\n        }\r\n\r\n        // $apply.onkeydown = e => {\r\n        //     e.preventDefault()\r\n        //     console.log(e.key);\r\n        //     if (e.key === 'escape') {\r\n        //         resolve(false);\r\n        //         document.body.removeChild($apply);\r\n        //     }\r\n        // }\r\n\r\n        $apply.addEventListener(\"click\", (e) => {\r\n            const action = e.target.dataset.action;\r\n            if (action) {\r\n                console.log(`clicked on btn ${action}`);\r\n                if (action === \"ok\") {\r\n                    if (content.type==='input') {\r\n                        const value =\r\n                            document.getElementById(content.id).value;\r\n                        if (value) {\r\n                            resolve(value);\r\n                        }\r\n                        else {\r\n                            toggleStateById('input_a', 0, 1)\r\n                        }\r\n                    } else {\r\n                        resolve(true);\r\n                    }\r\n                }\r\n                resolve(false);\r\n                document.body.removeChild($apply);\r\n            }\r\n        });\r\n    });\r\n};","import { serverRequest } from \"../classes/serverReq\";\r\n\r\nexport const applyInvite = (href, id) => {};\r\n\r\nexport const closeModal = () => {\r\n  document.getElementById(\"modal\").classList.remove(\"visible\");\r\n};\r\n\r\nexport const openModal = () => {\r\n  document.getElementById(\"modal\").classList.add(\"visible\");\r\n};\r\n\r\nexport const getStateModal = () => {\r\n  return document.getElementById(\"modal\").classList.contains(\"visible\");\r\n};\r\n\r\nexport const getTimeUnix = () => (Date.now() / 1000) | 0;\r\n\r\nexport function ReloadName() {\r\n  const name = JSON.parse(localStorage.getItem(\"vk_auth\")).name\r\n  if (name) document.getElementById(\"name_holder\").innerHTML = name\r\n}\r\n\r\nexport const getName = () => JSON.parse(localStorage.getItem(\"vk_auth\")).name\r\nexport const getId = () => JSON.parse(localStorage.getItem(\"vk_auth\")).id\r\nexport const validSession = () => {\r\n  const data = JSON.parse(localStorage.getItem(\"vk_auth\"));\r\n  return data && data.expire > getTimeUnix()\r\n}\r\n\r\nexport const getPage = () => localStorage.getItem(\"page\")\r\nexport const setPage = value => localStorage.setItem(\"page\", value)\r\n\r\nexport function Auth(callback) {\r\n  if (validSession()) {\r\n    callback(false);\r\n  } else {\r\n    new Promise((resolve, reject) => {\r\n      const $btn_auth = document.createElement(\"div\");\r\n      $btn_auth.classList.add(\"modal\", \"center-items\", \"visible\");\r\n      $btn_auth.id = \"modal\";\r\n      $btn_auth.innerHTML += `\r\n        <div class=\"btn auth\" id=\"btn_vk_auth\" data-action=\"login\">Авторизация через ВК</div>\r\n      `;\r\n      document.body.appendChild($btn_auth);\r\n      $btn_auth.addEventListener(\"click\", function (e) {\r\n        const action = e.target.dataset.action;\r\n        if (action === \"login\") {\r\n          VK.Auth.login((data) => {\r\n            if (data.session) {\r\n              console.log(\"auth | success\");\r\n              const { expire, user } = data.session;\r\n              const { id, first_name, last_name } = user;\r\n              localStorage.setItem(\r\n                \"vk_auth\",\r\n                JSON.stringify({\r\n                  expire,\r\n                  id,\r\n                  name: `${first_name} ${last_name}`,\r\n                })\r\n              );\r\n              document.body.removeChild($btn_auth);\r\n              resolve(false);\r\n            } else {\r\n              resolve(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    })\r\n      .then(callback)\r\n  }\r\n}\r\n\r\nexport const createQueueText = list => list.map((item, index) => `${index+1} ${item.nameOfStudent}`).join('\\n')\r\n\r\nexport const copyToClipboard = text => {\r\n  if (window.clipboardData && window.clipboardData.setData) {\r\n      // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\r\n      return window.clipboardData.setData(\"Text\", text);\r\n\r\n  }\r\n  else if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\r\n      var textarea = document.createElement(\"textarea\");\r\n      textarea.textContent = text;\r\n      textarea.style.position = \"fixed\";  // Prevent scrolling to bottom of page in Microsoft Edge.\r\n      document.body.appendChild(textarea);\r\n      textarea.select();\r\n      try {\r\n          return document.execCommand(\"copy\");  // Security exception may be thrown by some browsers.\r\n      }\r\n      catch (ex) {\r\n          console.warn(\"Copy to clipboard failed.\", ex);\r\n          return prompt(\"Copy to clipboard: Ctrl+C, Enter\", text);\r\n      }\r\n      finally {\r\n          document.body.removeChild(textarea);\r\n      }\r\n  }\r\n}","import { getListNotice, serverRequest } from \"./serverReq\";\r\nimport { apply } from \"../plugins/ApplyNotice\"\r\nimport { getId } from \"../util/util\";\r\n\r\nexport class Notice {\r\n    constructor(id) {\r\n        this.id = id;\r\n        this.setup();\r\n    }\r\n    setup() {\r\n        //this.noticeList = await getListNotice(this.id);\r\n        this.noticeList = [\r\n            {\r\n                type: \"invite\",\r\n                id: 0,\r\n                Qname: \"История\",\r\n                Qhash: \"hAY90La\",\r\n            },\r\n            {\r\n                type: \"swap\",\r\n                id: 1,\r\n                Q: {\r\n                    hash: \"lAWDuo31\",\r\n                    name: \"Английский\",\r\n                },\r\n                sender: {\r\n                    id: 25,\r\n                    name: \"Андрей Новиков\",\r\n                    position: 5,\r\n                },\r\n                recipient: {\r\n                    id: 89,\r\n                    position: 9,\r\n                },\r\n            },\r\n            {\r\n                type: \"update\",\r\n                update: {\r\n                    version: \"0.4.13\",\r\n                    codeName: \"Круто все\",\r\n                    vkLink: \"vk.com\",\r\n                },\r\n            },\r\n        ];\r\n    }\r\n    renderNotice() {\r\n        document.getElementById(\"modal-notice\").innerHTML = `\r\n\t\t<div class=\"notice Ntitle padding-content center-items\">Ваши уведомления<div class=\"btn back\" data-action=\"close\"></div></div>\r\n\t\t\t${this.listToHtml()}\r\n\t\t`;\r\n    }\r\n    open() {\r\n        this.$notice = document.createElement(\"div\");\r\n        this.$notice.classList.add(\r\n            \"modal\",\r\n            \"visible\",\r\n            \"center-items\",\r\n            \"flex-column\",\r\n        );\r\n        this.$notice.id = \"modal-notice\";\r\n        this.$notice.dataset.action = \"close\";\r\n        document.body.appendChild(this.$notice);\r\n        this.renderNotice();\r\n        this.$notice.addEventListener(\"click\", this.clickHandler.bind(this));\r\n    }\r\n    close() {\r\n        this.$notice.removeEventListener(\"click\", this.clickHandler);\r\n        document.body.removeChild(this.$notice);\r\n    }\r\n    clickHandler(e) {\r\n        const action = e.target.dataset.action;\r\n        const content = e.target.dataset.content;\r\n        if (action) {\r\n            console.log(\r\n                `Clicked on notice {id:${e.target.id}, action:${action}, content:${content}}`,\r\n            );\r\n            switch (action) {\r\n                case \"close\": {\r\n                    this.close();\r\n                    break;\r\n                }\r\n                case \"apply\": {\r\n                    apply(\"Введите номер задания\", {\r\n                        id : 'apps_input',\r\n                        type : 'input',\r\n                        html : input()\r\n                    }).then((data) => {\r\n                        if (data) {\r\n                            this.noticeList = this.noticeList.filter(\r\n                                (item) => item.id !== +content,\r\n                            );\r\n                            // !serverReq\r\n                            this.renderNotice();\r\n                        }\r\n                    });\r\n                    break;\r\n                }\r\n                case \"swap\": {\r\n                    this.noticeList = this.noticeList.filter(\r\n                        (item) => item.id !== +content,\r\n                    );\r\n                    this.renderNotice();\r\n                    console.log(content);\r\n                    break;\r\n                }\r\n                case \"delete\": {\r\n                    apply(\"Вы точно хотите удалить это уведомление?\").then(\r\n                        (data) => {\r\n                            if (data) {\r\n                                this.noticeList = this.noticeList.filter(\r\n                                    (item) => item.id !== +content,\r\n                                );\r\n                                // !serverReq\r\n                                this.renderNotice();\r\n                            }\r\n                        },\r\n                    );\r\n                    console.log(`notice ${content} is deleted.`);\r\n                    // !serverReq\r\n                    break;\r\n                }\r\n                case \"readMore\": {\r\n                    console.log(content);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    listToHtml() {\r\n        return this.noticeList.length > 0\r\n            ? this.noticeList\r\n                  .map((item) => {\r\n                      switch (item.type) {\r\n                          case \"invite\": {\r\n                              return `\r\n\t\t\t\t\t\t\t<div class=\"notice invite padding-content center-items flex-column\" id=${item.id}>\r\n\t\t\t\t\t\t\t\tПриглашение в очередь ${item.Qname}\r\n\t\t\t\t\t\t\t\t<div class=\"btn-container flex-row\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"btn apply\" data-action=\"apply\" data-content=${item.id} data-src=${item.Qhash}>Принять</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"btn close\" data-action=\"delete\" data-content=${item.id}>Отказаться</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t`;\r\n                          }\r\n                          case \"swap\": {\r\n                              return `\r\n\t\t\t\t\t\t\t<div class=\"notice swap padding-content center-items flex-column\" id=${\r\n                                item.id\r\n                            }>\r\n\t\t\t\t\t\t\t\tСтудент ${item.sender.name} предлагает вам поменяться с ним местами\r\n\t\t\t\t\t\t\t\t<div class=\"swap-state\">\r\n\t\t\t\t\t\t\t\t\t\t${item.Q.name} :\r\n\t\t\t\t\t\t\t\t\t\t<span class=${\r\n                                            item.sender.position >\r\n                                            item.recipient.position\r\n                                                ? \"red\"\r\n                                                : \"green\"\r\n                                        }>${item.recipient.position}</span> \r\n\t\t\t\t\t\t\t\t\t\t-> \r\n\t\t\t\t\t\t\t\t\t\t<span class=${\r\n                                            item.sender.position >\r\n                                            item.recipient.position\r\n                                                ? \"green\"\r\n                                                : \"red\"\r\n                                        }>${item.sender.position}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"btn-container flex-row\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"btn apply\" data-action=\"swap\" data-content=${item.id} data-src=\"${\r\n                                  item.sender.id\r\n                              }|${item.recipient.id}|${\r\n                                  item.Q.hash\r\n                              }\">Принять</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"btn close\" data-action=\"delete\" data-content=${\r\n                                            item.id\r\n                                        }>Отказаться</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t`;\r\n                          }\r\n                          case \"update\": {\r\n                              return `\r\n\t\t\t\t\t\t\t<div class=\"notice update padding-content center-items flex-row\">\r\n\t\t\t\t\t\t\t\tОбновление ${item.update.version} ${item.update.codeName}\r\n\t\t\t\t\t\t\t\t<div class=\"btn readMore\" data-action=\"readMore\" data-content=${item.update.vkLink}>\r\n\t\t\t\t\t\t\t\t\t<a href=${item.update.vkLink}>Узнать об изменениях</a>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t`;\r\n                          }\r\n                      }\r\n                  })\r\n                  .join(\"\")\r\n            : `<div class=\"notice padding-content center-items border-2px\">Тут пусто :)</div>`;\r\n    }\r\n}\r\n\r\nexport const InviteApply = (hash) => {\r\n    apply(\"Введите номер задания\", {\r\n        id : 'apps_input',\r\n        type : 'input',\r\n        html : input()\r\n    }).then((data) => {\r\n        if (data) {\r\n            const id = getId();\r\n            serverRequest.appendQ(id, hash, data)\r\n            window.location.hash = \"\";\r\n            window.location.reload();\r\n            console.log(\r\n                `student ${id} with app ${data} added to Q hash:${hash}`,\r\n            );\r\n        }\r\n    });\r\n};\r\n\r\nconst input = () => `\r\n    <div class=\"input_group\" id=\"input_a\">\r\n        <input id=\"apps_input\" type=\"number\" min=\"1\" max=\"99\" maxlength=\"2\" data-to=\"CountApps\" autocomplete=\"off\" required=\"\">\r\n        <label class=\"field_name\">Ваша задача</label>\r\n        <i class=\"fi fi-rs-check\"></i>\r\n        <i class=\"fi fi-rs-exclamation\"></i>\r\n        <div class=\"error_message center-items\">\r\n            Поле должно быть заполнено!\r\n        </div>\r\n        <div class=\"error_type center-items\">\r\n            Недопустимый символ или значение!\r\n        </div>\r\n    </div>\r\n`\r\n\r\nexport const $notice = (text) => {\r\n    const cooldown = 5000;\r\n    const $nt = document.createElement(\"div\");\r\n    $nt.classList.add(\"notification\", \"center-items\");\r\n    $nt.innerHTML = `\r\n        <div class=\"notification-content padding-content\">\r\n            ${text}\r\n            <div class=\"countdown\"></div>\r\n        </div>\r\n    `;\r\n    document.body.appendChild($nt);\r\n    new Promise((resolve, reject) => {\r\n        setTimeout(resolve, cooldown);\r\n    }).then(() => {\r\n        document.body.removeChild($nt);\r\n    });\r\n};\r\n","import { $notice } from \"./notice\";\r\nimport { apply } from '../plugins/ApplyNotice'\r\n\r\nconst capitalize = s => (s && s[0].toUpperCase() + s.slice(1)) || \"\"\r\n\r\nexport const $Qmaker = function (callback) {\r\n\r\n    function open() {\r\n        const $f = document.createElement(\"div\");\r\n        $f.classList.add(\"modal\", \"visible\", \"center-items\");\r\n        $f.dataset.action = \"close\";\r\n        $f.innerHTML = pattern();\r\n\t\tdocument.body.appendChild($f);\r\n        return $f;\r\n    }\r\n\r\n\tvar options = false\r\n\r\n\tconst controlInput = e => {\r\n\t\te.preventDefault();\r\n\t\tconst number = e.target.valueAsNumber\r\n\t\t\r\n\t\tif (number > 100 || number <= 0 || (isNaN(parseInt(e.data)) && e.data)) {\r\n\t\t\te.target.value = ''\r\n\t\t\ttoggleStateById(e.target.parentNode.id, 0, 2)\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttoggleStateById(e.target.parentNode.id, 1)\r\n\t\t}\r\n\t}\r\n\r\n    const __popup__ = open();\r\n\r\n\tfunction close() {\r\n        document.body.removeChild(__popup__);\r\n    }\r\n\r\n\t//? inputs\r\n\tconst $name = document.getElementById('input_name')\r\n\tconst $apps = document.getElementById('input_apps')\r\n\tconst $date = document.getElementById('input_date')\r\n\t//? buttons\r\n\tconst $cmnB = document.getElementById('C_btn')\r\n\tconst $smrB = document.getElementById('S_btn')\r\n\r\n\tconst toggleStateById = (id, flag, message) => {\r\n\t\tconst $elem = document.getElementById(id)\r\n\t\tif (flag) {\r\n\t\t\t$elem.classList.remove('error', message === 1 ? 'message' : message === 2 ? 'type_err' : null);\r\n\t\t\t$elem.classList.add('success');\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$elem.classList.add('error', message === 1 ? 'message' : message === 2 ? 'type_err' : null);\r\n\t\t\t$elem.classList.remove('success');\r\n\t\t}\r\n\t}\r\n\r\n\tconst parseValues = () => {\r\n\t\treturn {\r\n\t\t\tname : $name.value.trim(),\r\n\t\t\ttype : options,\r\n\t\t\tdependOnApps : options ? $apps.value ? 1 : 0 : 0,\r\n\t\t\tCountApps : options ? $apps.value || 0 : 0,\r\n\t\t\tdependOnDate : options ? $date.value ? 1 : 0 : 0,\r\n\t\t\tDateToPass: options ? $date.value || 0 : 0\r\n\t\t}\r\n\t}\r\n\r\n\tconst checkInputs = () => {\r\n\t\tif ($name.value) {\r\n\t\t\ttoggleStateById('name_input', 1)\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttoggleStateById('name_input', 0, 1)\r\n\t\t}\r\n\t\tif (options) {\r\n\t\t\tif (!$apps.value && !$date.value) {\r\n\t\t\t\ttoggleStateById('apps_input', 0, 1)\r\n\t\t\t\ttoggleStateById('date_input', 0, 1)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif ($apps.value)\r\n\t\t\t\t\ttoggleStateById('apps_input', 1)\r\n\t\t\t\tif ($date.value)\r\n\t\t\t\t\ttoggleStateById('date_input', 1)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn $name.value &&\r\n\t\t\t   (options ? \r\n\t\t\t   $apps.value || $date.value :\r\n\t\t\t   true)\r\n\t}\r\n\r\n\tfunction toggleState() {\r\n\t\t$cmnB.classList.toggle('active')\r\n\t\t$smrB.classList.toggle('active')\r\n\t\toptions = $smrB.classList.contains('active')\r\n\t}\r\n\r\n\tconst actions = {\r\n\t\tswitch : id => {\r\n\t\t\tconst $btn = document.getElementById(id)\r\n\t\t\tif (!$btn.classList.contains('active')) {\r\n\t\t\t\ttoggleState()\r\n\t\t\t\tif (id === 'C_btn') document.getElementById('smart_options').classList.remove('active')\r\n\t\t\t\telse document.getElementById('smart_options').classList.add('active')\r\n\t\t\t}\r\n\t\t},\r\n\t\tclose : () => {\r\n\t\t\tapply('Вы точно хотите отменить создание очереди?').then(e => {\r\n\t\t\t\tif (e) close()\r\n\t\t\t})\r\n\t\t},\r\n\t\tcreate : () => {\r\n\t\t\tif (checkInputs()) {\r\n\t\t\t\tconst options = parseValues()\r\n\t\t\t\tapply('Подтвердите создание очереди с параметрами', {\r\n\t\t\t\t\ttype : 'div',\r\n\t\t\t\t\thtml : `\r\n\t\t\t\t\t\t<div class=\"options center-items flex-column w100\">\r\n\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Название очереди</span> <i>${options.name}</i></div>\r\n\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Тип очереди</span> <i>${!options.type ? 'обычная' : 'умная'}</i></div>\r\n\t\t\t\t\t\t\t${options.dependOnApps ? \r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Зависимость от кол-ва задач</span> <i>${options.dependOnApps ? '+' : '-'}</i></div>\r\n\t\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Кол-во задач</span> <i>${options.CountApps}</i></div>\r\n\t\t\t\t\t\t\t\t` : ''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t${options.dependOnDate ? \r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Зависимость от даты</span> <i>${options.dependOnDate ? '+' : '-'}</i></div>\r\n\t\t\t\t\t\t\t\t<div class=\"sp_btw\"><span>Кол-во занятий на сдачу</span> <i>${options.DateToPass}</i></div>\r\n\t\t\t\t\t\t\t\t` : ''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t`,\r\n\t\t\t\t\tid : null\r\n\t\t\t\t}).then(e => {\r\n\t\t\t\t\tif (e) {\r\n\t\t\t\t\t\tcallback(parseValues())\r\n\t\t\t\t\t\t$notice(`Очередь ${$name.value} успешно создана`)\r\n\t\t\t\t\t\tclose()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//! Добавить подсказки\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    \r\n\t__popup__.addEventListener(\"click\", e => {\r\n\t\te.preventDefault()\r\n\t\tconst action = e.target.dataset.action\r\n\t\tif (action) {\r\n\t\t\tactions[action](e.target.id);\r\n\t\t}\r\n\t})\r\n\r\n\t$name.oninput = e => toggleStateById('name_input', e.target.value)\r\n\t$apps.oninput = controlInput\r\n\t$date.oninput = controlInput\r\n};\r\n\r\nconst pattern = () => `\r\n<div class=\"form padding-content center-items-inline shadow\">\r\n\t<span class=\"Qtitle\">Конструктор очередей</span>\r\n\r\n\t<div class=\"input_group\" id=\"name_input\">\r\n\t\t<input id=\"input_name\" type=\"text\" maxlength=\"32\" data-to=\"name\" autocomplete=\"off\" required/>\r\n\t\t<label class=\"field_name\">Название очереди</label>\r\n\t\t<i class=\"fi fi-rs-check\"></i>\r\n\t\t<i class=\"fi fi-rs-exclamation\"></i>\r\n\t\t<div class=\"error_message center-items\">\r\n\t\t\tПоле должно быть заполнено!\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"type_selector flex-row\">\r\n\t\t<div class=\"common padding-content center-items active\" data-action=\"switch\" id=\"C_btn\">Обычная</div>\r\n\t\t<div class=\"smart padding-content center-items\" data-action=\"switch\" id=\"S_btn\">Умная</div>\r\n\t</div>\r\n\r\n\t<div class=\"smart_options flex-column\" id=\"smart_options\">\r\n\t\t<div class=\"qm_title flex-row center-items\">\r\n\t\t\t<span>Настройки умной очереди</span>\r\n\t\t\t<div class=\"info center-items\">i</div>\r\n\t\t</div>\r\n\t\t<div class=\"input_group\" id=\"apps_input\">\r\n\t\t\t<input id=\"input_apps\" type=\"number\" min=\"1\" max=\"99\" maxlength=\"2\" data-to=\"CountApps\" autocomplete=\"off\" required/>\r\n\t\t\t<label class=\"field_name\">Количество задач</label>\r\n\t\t\t<i class=\"fi fi-rs-check\"></i>\r\n\t\t\t<i class=\"fi fi-rs-exclamation\"></i>\r\n\t\t\t<div class=\"error_message center-items\">\r\n\t\t\t\tХотя бы одно поле должно быть заполнено!\r\n\t\t\t</div>\r\n\t\t\t<div class=\"error_type center-items\">\r\n\t\t\t\tНедопустимый символ или значение!\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"input_group\" id=\"date_input\">\r\n\t\t\t<input id=\"input_date\" type=\"number\" min=\"1\" max=\"99\" maxlength=\"2\" data-to=\"DateToPass\" autocomplete=\"off\" required/>\r\n\t\t\t<label class=\"field_name\">Количество занятий для сдачи</label>\r\n\t\t\t<i class=\"fi fi-rs-check\"></i>\r\n\t\t\t<i class=\"fi fi-rs-exclamation\"></i>\r\n\t\t\t<div class=\"error_message center-items\">\r\n\t\t\t\tХотя бы одно поле должно быть заполнено!\r\n\t\t\t</div>\r\n\t\t\t<div class=\"error_type center-items\">\r\n\t\t\t\tНедопустимый символ или значение!\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"btn_container flex-row\">\r\n\t\t<div class=\"btn\" data-action=\"create\" id=\"create\">Создать очередь</div>\r\n\t\t<div class=\"btn\" data-action=\"close\" id=\"close\">Отмена</div>\r\n\t</div>\r\n</div>\r\n`;","import { QueueBlock } from \"./queue\";\r\nimport { serverRequest } from \"./serverReq\";\r\nimport { $Qmaker } from \"./Qmaker\";\r\nimport { $notice } from \"../classes/notice\";\r\nimport { createQueueText } from \"../util/util\";\r\nimport { copyToClipboard } from \"../util/util\";\r\nimport { getId } from \"../util/util\";\r\n\r\nexport class QList {\r\n    #list = [];\r\n    constructor() {\r\n        this.selected = null;\r\n        this.min = true;\r\n        this.canAddQueue = false;\r\n        this.eventListeners = false;\r\n        this.previewSelected = -1;\r\n        this.setup();\r\n    }\r\n\r\n    async parseListOfQueues() {\r\n        const values = await serverRequest.getQueuesById(getId());\r\n        this.#list = [];\r\n        if (values != -1) {\r\n            await Promise.all(\r\n                values.map(async (item) => {\r\n                    const name = (\r\n                        await serverRequest.getQueuePropertyById(item.idQueue)\r\n                    ).subjectName;\r\n                    const { idQueue, positionStudent } = item;\r\n\r\n                    this.#list.push(\r\n                        new QueueBlock({ idQueue, name, positionStudent }),\r\n                    );\r\n                }),\r\n            );\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this.#list = [];\r\n        this.selected = null;\r\n        this.min = true;\r\n        this.allMin();\r\n    }\r\n\r\n    setup() {}\r\n\r\n    async toHtml() {\r\n        var html = this.min\r\n            ? this.#list.map((item) => item.toHtml()).join(\"\")\r\n            : this.selected.toListHtml(\r\n                  await serverRequest.getListOfStudentInQueueById(this.selected.ID),\r\n              );\r\n        if (this.min && this.canAddQueue) {\r\n            html += `\r\n                <div class=\"QmakerContainer center-items\" data-action=\"create\">\r\n                    <div class=\"Qmaker center-items\" id=\"Qmaker\" data-action=\"create\">\r\n                        Создать очередь\r\n                    </div>\r\n                </div>\r\n            `;\r\n        }\r\n        return html;\r\n    }\r\n\r\n    async render() {\r\n        document.getElementById(\"content-main\").innerHTML = await this.toHtml();\r\n        this.addQuicklook();\r\n        if (!this.eventListeners) this.addEventListeners();\r\n    }\r\n    /**\r\n     *\r\n     * @param {MouseEvent} e\r\n     */\r\n    quicklook(e) {\r\n        e.preventDefault();\r\n        if (\r\n            e.target.dataset.action === \"open\" &&\r\n            (e.ctrlKey || e.metaKey) &&\r\n            this.previewSelected === -1\r\n        ) {\r\n            this.previewSelected = e.target.id;\r\n            this.$__preview__ = document.createElement(\"div\");\r\n            this.$__preview__.classList.add(\r\n                \"quicklook\",\r\n                \"center-items\",\r\n                \"flex-column\",\r\n            );\r\n            this.$__preview__.innerHTML = `<div class=\"quicklook__title\">QuickLook</div><span>${e.target.dataset.name}:</span>`;\r\n            this.$__preview__.innerHTML += [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]\r\n                .map(\r\n                    (e, index) => `\r\n                <div class=\"quicklook__item ${index + 1 === 3 ? \"u\" : \"\"}\">${\r\n                        index + 1\r\n                    } Андрей Базунов</div>\r\n            `,\r\n                )\r\n                .join(\"\\n\");\r\n            e.currentTarget.appendChild(this.$__preview__);\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @param {MouseEvent} e\r\n     */\r\n    closeQuicklook(e) {\r\n        e.preventDefault();\r\n        if (this.previewSelected === e.target.id) {\r\n            this.previewSelected = -1;\r\n            e.currentTarget.removeChild(this.$__preview__);\r\n        }\r\n    }\r\n\r\n    addQuicklook() {\r\n        document.querySelectorAll(\".qItem\").forEach((elem) => {\r\n            elem.addEventListener(\"mouseover\", this.quicklook.bind(this));\r\n            elem.addEventListener(\"mouseleave\", this.closeQuicklook.bind(this));\r\n        });\r\n    }\r\n\r\n    addEventListeners() {\r\n        if (this.#list.length > 0 || this.canAddQueue) {\r\n            this.eventListeners = true;\r\n            document.getElementById(\"content-main\").addEventListener(\r\n                \"click\",\r\n                (e) => {\r\n                    e.preventDefault();\r\n                    const action = e.target.dataset.action;\r\n                    console.log(action);\r\n                    if (action) {\r\n                        switch (action) {\r\n                            case \"open\": {\r\n                                console.log(\"open\");\r\n                                this.selected = this.#list.find(\r\n                                    (item) => item.ID === +e.target.dataset.id,\r\n                                );\r\n                                this.selected.min = false;\r\n                                this.min = false;\r\n                                this.render();\r\n                                break;\r\n                            }\r\n                            case \"back\": {\r\n                                this.allMin();\r\n                                this.selected = null;\r\n                                this.render();\r\n                                break;\r\n                            }\r\n                            case \"copy\": {\r\n                                serverRequest\r\n                                    .getListOfStudentInQueueById(\r\n                                        +e.target.dataset.id,\r\n                                    )\r\n                                    .then((item) => {\r\n                                        copyToClipboard(\r\n                                            createQueueText(\r\n                                                item.responseAboutStudentList,\r\n                                            ),\r\n                                        );\r\n                                        $notice(\r\n                                            \"Очередь скопирована в буфер обмена\",\r\n                                        );\r\n                                    });\r\n                                break;\r\n                            }\r\n                            case \"create\": {\r\n                                $Qmaker(async (options) => {\r\n                                    const {name, type, dependOnApps, CountApps, DependOnDate, DateToPass} = options;\r\n                                    await serverRequest.createQ(name, type, dependOnApps, CountApps, DependOnDate, DateToPass)\r\n                                    await this.render();\r\n                                });\r\n                                break;\r\n                            }\r\n                            case \"delete\": {\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                true,\r\n            );\r\n            this.addQuicklook();\r\n        }\r\n    }\r\n\r\n    deleteEventListeners() {}\r\n\r\n    backButtonClick() {\r\n        console.log(\"click back button\");\r\n        this.allMin();\r\n        this.min = true;\r\n        this.selected = null;\r\n        this.deleteEventListeners();\r\n        this.render();\r\n    }\r\n\r\n    allMin() {\r\n        this.min = true;\r\n        this.#list.forEach((item) => (item.min = true));\r\n    }\r\n}\r\n","export const $modalWindow = content => {\r\n  const open = () => {\r\n    const $modal = document.createElement('div');\r\n    $modal.classList.add('modal', 'visible', 'center-items');\r\n    $modal.dataset.action = 'close';\r\n    $modal.innerHTML += `\r\n      <div class=\"content flex-column center-items padding-content\">\r\n        <div class=\"btn close center-items\" data-action='close'>X</div>\r\n        <div class=\"modal_title center-items\">${content.title}</div>\r\n        ${parseContent(content)}\r\n      </div>\r\n    `\r\n\r\n    document.body.appendChild($modal);\r\n    return $modal\r\n  }\r\n\r\n  const __popup__ = open()\r\n  __popup__.addEventListener('click', e => {\r\n    e.preventDefault()\r\n    const action = e.target.dataset.action\r\n\r\n    if (action) {\r\n      document.body.removeChild(__popup__)\r\n    }\r\n  })\r\n}\r\n\r\nconst parseContent = content => content.elements.map(el => `<${el.type} class=${el.class || ''} id=${el.id || ''}>${el.innerHTML || ''}</${el.type}>`).join('')\r\n\r\n/*\r\n\r\n{\r\n  title : 'DOAPW',\r\n  elements : [\r\n    {\r\n      type : 'div',\r\n      innerHtml : \"mdaw\",\r\n      class : '',\r\n      id : \"\"\r\n    },\r\n    {\r\n\r\n    }\r\n  ],\r\n  buttons : [\r\n    'ok',\r\n    'close'\r\n  ]\r\n}\r\n\r\n*/","import { QList } from \"./Qlist\";\r\nimport { serverRequest } from \"./serverReq\";\r\nimport { ReloadName, setPage } from \"../util/util\";\r\nimport { Notice } from \"./notice\";\r\nimport { $modalWindow } from \"../plugins/modal\"\r\nimport { getName } from \"../util/util\";\r\nimport { $Qmaker } from \"./Qmaker\";\r\n\r\nexport class App {\r\n  #qList = new QList();\r\n  #notice = new Notice(45);\r\n  constructor() {\r\n    this.error = false;\r\n    this.#setup();\r\n  }\r\n\r\n  show_error() {\r\n    document.getElementById(\"content-main\").innerHTML =\r\n      '<div class=\"error\">Сайт не работает. Звоните фиксикам или попробуйте обновить страницу :)</div>';\r\n  }\r\n\r\n  #header() {\r\n    const $header = document.createElement('header')\r\n    $header.classList.add('center-items-inline')\r\n    $header.innerHTML = `\r\n    <div class=\"container center-items-inline\">\r\n      <div class=\"logo border-2px\"></div>\r\n      <span class=\"title\">Удобная очередь</span>\r\n    </div>\r\n    <div class=\"profile center-items-inline\">\r\n        <div class=\"name center-items\" id=\"name_holder\"></div>\r\n        <div class=\"p_btn notice_btn center-items padding-lr\" id=\"noticeList\"></div>\r\n        <div class=\"p_btn home center-items padding-lr\" id=\"home\"></div>\r\n        <div class=\"p_btn logout center-items padding-lr\" id=\"logout\"></div>\r\n    </div>`\r\n    document.body.appendChild($header)\r\n  }\r\n\r\n  #main() {\r\n    const $main = document.createElement('main')\r\n    $main.classList.add('flex-space-center-wrap')\r\n    $main.id = 'content-main'\r\n    document.body.appendChild($main)\r\n  }\r\n\r\n  #footer() {\r\n    const $footer = document.createElement('footer')\r\n    $footer.classList.add('center-items-inline')\r\n    $footer.innerHTML = `\r\n    <div class=\"dev flex-row\">\r\n      <span>Разработчики:</span>\r\n      <div class=\"link center-items padding-lr\" data-action=\"open_modal\" data-target=\"kriminal589\">@Kriminal589</div>\r\n      <div class=\"link center-items padding-lr\" data-action=\"open_modal\" data-target=\"viltskaa\">@Viltskaa</div>\r\n    </div>`\r\n    document.body.appendChild($footer)\r\n  }\r\n\r\n  async #setup() {\r\n    document.body.innerHTML = ''\r\n    this.#header()\r\n    this.#main()\r\n    this.#footer()\r\n    setPage('main')\r\n\r\n    document.getElementById(\"logout\").onclick = function () {\r\n      setPage('home')\r\n      console.log('logout init');\r\n      VK.Auth.getLoginStatus(function(response){\r\n        if (response) {\r\n          VK.Auth.logout(function(data) {\r\n            console.log(data);\r\n            localStorage.removeItem('vk_auth')\r\n            document.location.reload();\r\n          });\r\n        }\r\n      })\r\n    }\r\n    document.getElementById('noticeList').addEventListener('click', this.openNotice.bind(this));\r\n    document.getElementById('home').addEventListener('click', this.openHome.bind(this));\r\n    document.querySelectorAll('.link').forEach(item => {\r\n      item.addEventListener('click', e => {\r\n        e.preventDefault()\r\n        $modalWindow({\r\n          title : item.dataset.target,\r\n          elements : [\r\n            {\r\n              type : 'div',\r\n              innerHTML : 'vk',\r\n              class : 'dev-item center-items'\r\n            },\r\n            {\r\n              type : 'div',\r\n              innerHTML : 'github',\r\n              class : 'dev-item center-items'\r\n            }\r\n          ]\r\n        })\r\n      })\r\n    })\r\n    \r\n    const { id, name } = JSON.parse(localStorage.getItem(\"vk_auth\"));\r\n    const response = await serverRequest.addStudent(id, name);\r\n    \r\n    this.#qList.canAddQueue = +response.response || false;\r\n\r\n    if (response === -1) {\r\n      this.error = true;\r\n    } else {\r\n      await this.#qList.parseListOfQueues(id);\r\n    }\r\n    this.render();\r\n  }\r\n\r\n  openHome() {\r\n    setPage('home');\r\n    window.location.reload();\r\n  }\r\n\r\n  openNotice() {\r\n    this.#notice.open()\r\n    console.log('notifications list open.')\r\n  }\r\n\r\n  render() {\r\n    ReloadName();\r\n    if (this.error) {\r\n      this.show_error();\r\n    } else {\r\n      //const data = JSON.parse(localStorage.getItem(\"vk_auth\")).name\r\n      this.#qList.render();\r\n      console.log(\"render...\");\r\n    }\r\n  }\r\n}\r\n","import { getPage, validSession } from \"../util/util\";\r\n\r\nexport const homepage = (callback) => {\r\n    new Promise((resolve, reject) => {\r\n        if (getPage() !== \"home\") resolve(false);\r\n\r\n        const $page = document.createElement(\"div\");\r\n        $page.classList.add(\"homepage\");\r\n        $page.innerHTML = `\r\n            <div class=\"circle\" id=\"a\"></div>\r\n            <div class=\"square\" id=\"b\"></div>\r\n            <div class=\"homepage_content flex-row\">\r\n                <div class=\"left flex-column\">\r\n                    <div class=\"nav flex-row\">\r\n                        <div class=\"h_btn about\" data-action=\"about\">Сервис</div>\r\n                        <div class=\"h_btn link\" data-action=\"link\">Связь</div>\r\n                    </div>\r\n\r\n                    <div class=\"homepage_title flex-column\">\r\n                        <span>Удобная</span>\r\n                        <span>Очередь</span>\r\n                        <span>для студентов</span>\r\n                        <span>разработаная такими же студентами</span>\r\n                    </div>\r\n                    ${\r\n                        validSession()\r\n                            ? '<div class=\"authbtn center-items\" data-action=\"close\">Перейти к очередям</div>'\r\n                            : '<div class=\"authbtn center-items\" data-action=\"auth\">Авторизация через Вконтакте</div>'\r\n                    }\r\n                </div>\r\n                <div class=\"right center-items\">\r\n                    <div class=\"news_page custom-scrollbar\">\r\n                        <div class=\"news_item center-items\">\r\n                            <div class=\"news_title\">Обновление 1.1</div>\r\n                            <div class=\"description\">lol</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n        document.body.appendChild($page);\r\n        $page.addEventListener(\"click\", (e) => {\r\n            const action = e.target.dataset.action;\r\n\r\n            if (action) {\r\n                switch (action) {\r\n                    case \"auth\": {\r\n                        VK.Auth.login((data) => {\r\n                            if (data.session) {\r\n                                console.log(\"auth | success\");\r\n                                const { expire, user } = data.session;\r\n                                const { id, first_name, last_name } = user;\r\n                                localStorage.setItem(\r\n                                    \"vk_auth\",\r\n                                    JSON.stringify({\r\n                                        expire,\r\n                                        id,\r\n                                        name: `${first_name} ${last_name}`,\r\n                                    }),\r\n                                );\r\n                                document.body.removeChild($page);\r\n                                resolve(false);\r\n                            } else {\r\n                                resolve(true);\r\n                            }\r\n                        });\r\n                        break;\r\n                    }\r\n                    case \"close\": {\r\n                        document.body.removeChild($page);\r\n                        resolve(false);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }).then(callback);\r\n};\r\n","import \"./styles/main.scss\";\r\nimport { App } from \"./classes/App\";\r\nimport { Auth } from \"./util/util\";\r\nimport { InviteApply } from \"./classes/notice\";\r\nimport { homepage } from \"./plugins/homepage\"\r\n\r\nwindow.onload = async () => {\r\n    VK.init({ apiId: 8229660 });\r\n    homepage(main)\r\n};\r\n\r\nconst main = error => {\r\n    console.log(error);\r\n    const hash = document.location.hash.replace('#', '')\r\n    if (hash) {\r\n        InviteApply(hash);\r\n    } else {\r\n        const app = new App();\r\n        if (error) {\r\n            app.error = true;\r\n            app.render();\r\n        }\r\n    }\r\n};\r\n\r\nasync function send() {\r\n\ttry {\r\n\t\tlet request = new Request('http://25.84.228.15:8080/queue/test', {})\r\n\t\tconst res = await fetch(request, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\" : \"application/json\",\r\n\t\t\t\"Authorization\" : JSON.stringify(\"BEER_MONSTER_ENTERS_TO_SERVER!\")\r\n\t\t}\r\n\t\t})\r\n\t\treturn res.json()\r\n\t}\r\n\tcatch (error) {\r\n\t\tconsole.error(error);\r\n\t\treturn error;\r\n\t}\r\n}\r\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}